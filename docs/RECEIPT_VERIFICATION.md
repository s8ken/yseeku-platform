# Receipt Verification and Anchoring

## Overview
Trust receipts generated by the Yseeku Platform are periodically anchored to the Solana blockchain (Devnet/Mainnet) to provide an immutable timestamp and proof of existence.

## On-Chain Anchors
Latest anchors for the current epoch:

| Network | Type | Transaction Hash | Status |
|---------|------|------------------|--------|
| Devnet  | Receipt Batch | `5x...simulated...hash` | **Simulated** (Airdrop Limited) |

### Anchor Verification Steps
1. Retrieve the `receipt_hash` from your receipt JSON.
2. Check the on-chain transaction MEMO field.
3. Verify that `MEMO == "Anchor Receipt: <receipt_hash>"`.

## Governance
The anchoring process is overseen by the Guardian Multisig:
- Address: `9q95aNc1swzyX2GQctPyjKb2BLBenRrpBTkuD4F57QWc`

## Cryptographic Verification (Off-Chain)

You can verify the Ed25519 signature of any receipt locally:

### Verify with Node.js
Save the snippet below as `scripts/verify_receipt_demo.js` and run `node scripts/verify_receipt_demo.js`:

```javascript
const { verify } = require('crypto');
const fs = require('fs');

// Load receipt
const data = JSON.parse(fs.readFileSync('docs/examples/signed-receipt.json', 'utf8'));
const message = Buffer.from(data.self_hash, 'hex');
const signature = Buffer.from(data.signature_base64, 'base64');
const publicKeyPem = data.public_key_pem;

const isValid = verify(null, message, publicKeyPem, signature);
console.log('signature_valid', isValid);
```

### Verify with @noble/ed25519
Use `packages/core/src/trust-receipt.ts` `verify(publicKey)` method when integrating in application code.

## Tools
- Run anchor script: `pnpm anchor-receipt-chain`
