(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class f{constructor(){this.isRunning=!1,this.activeSessions=new Map,this.eventQueue=[],this.config={latency:{min:70,max:100,target:85},throughput:{target:1e3,current:0},alerts:{enabled:!0,thresholds:{yellow:2,red:3.5,critical:6}}}}async initialize(){console.log("Initializing Demo Engine..."),this.isRunning=!0,this.startMetricsCollection(),this.startEventProcessing()}startMetricsCollection(){setInterval(()=>{this.collectMetrics()},1e3)}startEventProcessing(){setInterval(()=>{this.processEventQueue()},100)}collectMetrics(){const t={timestamp:Date.now(),latency:this.generateLatency(),throughput:this.generateThroughput(),trustScore:this.generateTrustScore(),alerts:this.generateAlerts()};this.dispatchMetric("metrics",t)}generateLatency(){const{min:t,max:e,target:n}=this.config.latency,i=(Math.random()-.5)*20;return Math.max(t,Math.min(e,n+i))}generateThroughput(){const{target:t}=this.config.throughput,e=(Math.random()-.5)*200;return Math.max(500,Math.min(1500,t+e))}generateTrustScore(){const e=(Math.random()-.5)*1;return Math.max(7,Math.min(10,8.5+e))}generateAlerts(){if(!this.config.alerts.enabled)return[];const t=[],e=Math.random();return e>.9?t.push({type:"warning",title:"Identity Coherence Drift",message:"Agent identity stability below threshold",timestamp:Date.now()}):e>.95&&t.push({type:"error",title:"Trust Protocol Violation",message:"Constitutional principle violation detected",timestamp:Date.now()}),t}queueEvent(t){this.eventQueue.push(t)}processEventQueue(){for(;this.eventQueue.length>0;){const t=this.eventQueue.shift();this.processEvent(t)}}processEvent(t){switch(t.type){case"detection":this.handleDetectionEvent(t);break;case"experiment":this.handleExperimentEvent(t);break;case"orchestration":this.handleOrchestrationEvent(t);break;default:console.log("Unknown event type:",t.type)}}handleDetectionEvent(t){console.log("Processing detection event:",t)}handleExperimentEvent(t){console.log("Processing experiment event:",t)}handleOrchestrationEvent(t){console.log("Processing orchestration event:",t)}dispatchMetric(t,e){const n=new CustomEvent(`demo-metric-${t}`,{detail:e});document.dispatchEvent(n)}createSession(t,e={}){const n={id:t,startTime:Date.now(),config:e,metrics:[],status:"active"};return this.activeSessions.set(t,n),n}endSession(t){const e=this.activeSessions.get(t);return e?(e.status="completed",e.endTime=Date.now(),e):null}getSessionMetrics(t){const e=this.activeSessions.get(t);return e?e.metrics:[]}}class y{constructor(){this.principles=[{id:"consent",name:"Informed Consent",weight:.2,description:"Users must explicitly understand and agree to AI interactions",score:8.5},{id:"explanation",name:"Explainable Reasoning",weight:.18,description:"AI systems must provide transparent reasoning for decisions",score:9.2},{id:"audit",name:"Audit Trail",weight:.16,description:"Complete cryptographic logging of all interactions",score:9.5},{id:"override",name:"Human Override",weight:.15,description:"Humans must always have the ability to override AI decisions",score:8.8},{id:"disconnect",name:"Right to Disconnect",weight:.15,description:"Users can terminate any AI interaction and have data deleted",score:9},{id:"agency",name:"Moral Agency",weight:.16,description:"Respect for human moral agency and ethical decision-making",score:8.7}],this.trustReceipts=[],this.currentScore=this.calculateOverallScore()}async initialize(){console.log("Initializing Trust Protocol Demo..."),this.setupEventListeners(),this.generateInitialReceipts()}setupEventListeners(){document.addEventListener("click",t=>{const e=t.target.closest(".principle-card");if(e){const n=e.dataset.principle;this.handlePrincipleInteraction(n)}})}handlePrincipleInteraction(t){const e=this.principles.find(n=>n.id===t);if(e){const n=(Math.random()-.5)*.4;e.score=Math.max(7,Math.min(10,e.score+n)),this.updatePrincipleDisplay(t,e.score),this.currentScore=this.calculateOverallScore(),this.generateTrustReceipt()}}updatePrincipleDisplay(t,e){const n=document.querySelector(`[data-principle="${t}"]`);if(n){const i=n.querySelector(".score-fill"),s=n.querySelector(".score-value");i&&s&&(i.style.width=`${e*10}%`,s.textContent=`${e.toFixed(1)}/10`)}}calculateOverallScore(){const t=this.principles.reduce((e,n)=>e+n.score*n.weight,0);return Math.round(t*100)/100}async generateTrustReceipt(){const t={id:this.generateId(),timestamp:Date.now(),contentHash:this.generateContentHash(),signature:this.generateSignature(),principleScores:this.principles.map(e=>({id:e.id,name:e.name,score:e.score,weight:e.weight})),overallScore:this.currentScore,trustProtocol:this.determineTrustProtocol(),metadata:{version:"1.0.0",sessionId:this.getSessionId(),agentId:this.getAgentId()}};return this.trustReceipts.push(t),this.dispatchReceiptEvent(t),t}generateId(){return`receipt-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}generateContentHash(){const t=JSON.stringify({timestamp:Date.now(),scores:this.principles.map(e=>e.score)});return Array.from(t).reduce((e,n)=>(e<<5)-e+n.charCodeAt(0),0).toString(16).padStart(64,"0")}generateSignature(){const t=this.generateContentHash();return Array.from(t+"demo_private_key").reduce((n,i)=>(n<<5)-n+i.charCodeAt(0),0).toString(16).padStart(128,"0")}determineTrustProtocol(){return this.currentScore>=9?"PASS":this.currentScore>=7.5?"PARTIAL":"FAIL"}getSessionId(){return`session-${Date.now()}`}getAgentId(){return"agent-sonate-demo"}dispatchReceiptEvent(t){const e=new CustomEvent("trust-receipt-generated",{detail:t});document.dispatchEvent(e)}generateInitialReceipts(){for(let t=0;t<5;t++)setTimeout(()=>{this.generateTrustReceipt()},t*500)}async verifyReceipt(t){const e=this.trustReceipts.find(s=>s.contentHash===t);if(!e)return{verifiable:!1,hashOk:!1,signatureOk:!1,error:"Receipt not found"};const n=this.verifyHash(e),i=this.verifySignature(e);return{verifiable:n&&i,hashOk:n,signatureOk:i,receipt:e}}verifyHash(t){const e=this.generateContentHash();return t.contentHash===e}verifySignature(t){return t.signature&&t.signature.length===128}getReceiptHistory(t=10){return this.trustReceipts.slice(-t).reverse()}getComplianceStatus(){const t=this.trustReceipts.filter(i=>i.trustProtocol==="PASS").length,e=this.trustReceipts.length,n=e>0?t/e*100:100;return{rate:Math.round(n),passing:t,total:e,status:n>=95?"EXCELLENT":n>=85?"GOOD":n>=70?"NEEDS_IMPROVEMENT":"POOR"}}}class v{constructor(){this.history=[],this.maxHistoryLength=100,this.baseline=null,this.thresholds={normal:.5,warning:.7,critical:.85},this.currentVelocity=0,this.alerts=[]}async initialize(){console.log("Initializing Phase-Shift Velocity Calculator..."),this.establishBaseline(),this.startContinuousMonitoring()}establishBaseline(){const t=[];for(let e=0;e<10;e++)t.push(this.generateMeasurement());this.baseline={resonance:this.average(t.map(e=>e.resonance)),canvas:this.average(t.map(e=>e.canvas)),identity:this.average(t.map(e=>e.identity)),timestamp:Date.now()},console.log("Baseline established:",this.baseline)}startContinuousMonitoring(){setInterval(()=>{this.calculatePhaseVelocity()},1e3)}calculatePhaseVelocity(){const t=this.generateMeasurement();if(!this.baseline){this.establishBaseline();return}const e=(t.timestamp-this.baseline.timestamp)/1e3,n=Math.abs(t.resonance-this.baseline.resonance),i=Math.abs(t.canvas-this.baseline.canvas),s=Math.sqrt(n*n+i*i)/e;return this.currentVelocity=s,this.addToHistory(t,s),this.checkAlerts(s),this.dispatchVelocityUpdate({velocity:s,measurement:t,status:this.getVelocityStatus(s)}),s}generateMeasurement(){const t=Date.now()/1e4;return{resonance:this.clamp(7+Math.sin(t)*1.5+(Math.random()-.5)*.5,0,10),canvas:this.clamp(75+Math.cos(t*.8)*10+(Math.random()-.5)*5,0,100),identity:this.clamp(.85+Math.sin(t*1.2)*.1+(Math.random()-.5)*.05,0,1),timestamp:Date.now()}}addToHistory(t,e){const n={timestamp:Date.now(),measurement:t,velocity:e,status:this.getVelocityStatus(e)};this.history.push(n),this.history.length>this.maxHistoryLength&&this.history.shift()}checkAlerts(t){let e=null,n="";if(t>=this.thresholds.critical?(e="critical",n=`Critical phase-shift velocity detected: ${t.toFixed(3)} - Immediate attention required`):t>=this.thresholds.warning&&(e="warning",n=`Elevated phase-shift velocity: ${t.toFixed(3)} - Monitor closely`),e){const i={type:e,message:n,velocity:t,timestamp:Date.now()};this.alerts.push(i),this.dispatchAlert(i),this.alerts.length>50&&this.alerts.shift()}}getVelocityStatus(t){return t>=this.thresholds.critical?"CRITICAL":t>=this.thresholds.warning?"WARNING":t>=this.thresholds.normal?"ELEVATED":"NORMAL"}getVelocityTrend(t=10){const e=this.history.slice(-t);if(e.length<2)return"insufficient_data";const n=e.map(s=>s.velocity),i=this.calculateTrend(n);return i>.1?"increasing":i<-.1?"decreasing":"stable"}calculateTrend(t){if(t.length<2)return 0;const e=t.length,n=e*(e-1)/2,i=t.reduce((o,c)=>o+c,0),s=t.reduce((o,c,l)=>o+c*l,0),a=e*(e-1)*(2*e-1)/6;return(e*s-n*i)/(e*a-n*n)}getIdentityCoherence(){if(this.history.length===0)return 1;const t=this.history.slice(-5).map(s=>s.measurement.identity),e=this.baseline?this.baseline.identity:.85,n=this.average(t),i=Math.cos(n-e);return Math.max(0,Math.min(1,i))}detectTransitionEvents(){const t=[],e=this.history.slice(-20);for(let n=1;n<e.length;n++){const i=e[n],s=e[n-1],a=Math.abs(i.velocity-s.velocity),r=Math.abs(i.measurement.resonance-s.measurement.resonance),o=Math.abs(i.measurement.canvas-s.measurement.canvas);(a>.2||r>1||o>10)&&t.push({timestamp:i.timestamp,type:this.classifyTransition(a,r,o),magnitude:Math.max(a,r/10,o/100),data:{velocityChange:a,resonanceChange:r,canvasChange:o}})}return t}classifyTransition(t,e,n){return t>.3?"identity_shift":e>1.5?"resonance_rupture":n>15?"canvas_disruption":"minor_fluctuation"}generateReport(){const t=this.history.slice(-60),e=this.detectTransitionEvents(),n=this.getVelocityTrend(),i=this.getIdentityCoherence();return{summary:{currentVelocity:this.currentVelocity,status:this.getVelocityStatus(this.currentVelocity),trend:n,coherence:i,alertCount:this.alerts.length,transitionCount:e.length},metrics:{averageVelocity:this.average(t.map(s=>s.velocity)),maxVelocity:Math.max(...t.map(s=>s.velocity)),minVelocity:Math.min(...t.map(s=>s.velocity)),volatility:this.calculateVolatility(t.map(s=>s.velocity))},transitions:e.slice(-5),recentAlerts:this.alerts.slice(-3),recommendations:this.generateRecommendations()}}calculateVolatility(t){if(t.length<2)return 0;const e=this.average(t),n=t.reduce((i,s)=>i+Math.pow(s-e,2),0)/t.length;return Math.sqrt(n)}generateRecommendations(){const t=[],e=this.getVelocityStatus(this.currentVelocity),n=this.getVelocityTrend(),i=this.getIdentityCoherence();return e==="CRITICAL"?t.push({priority:"high",action:"immediate_intervention",message:"Immediate intervention required - Phase-shift velocity at critical levels"}):e==="WARNING"&&t.push({priority:"medium",action:"monitor_closely",message:"Monitor system closely - Elevated phase-shift velocity detected"}),n==="increasing"&&t.push({priority:"medium",action:"investigate_cause",message:"Investigate cause of increasing velocity trend"}),i<.8&&t.push({priority:"high",action:"stabilize_identity",message:"Identity coherence below threshold - Stabilization required"}),t.length===0&&t.push({priority:"low",action:"continue_monitoring",message:"System operating within normal parameters"}),t}clamp(t,e,n){return Math.max(e,Math.min(n,t))}average(t){return t.length===0?0:t.reduce((e,n)=>e+n,0)/t.length}dispatchVelocityUpdate(t){const e=new CustomEvent("phase-velocity-update",{detail:t});document.dispatchEvent(e)}dispatchAlert(t){const e=new CustomEvent("phase-velocity-alert",{detail:t});document.dispatchEvent(e)}}class w{constructor(){this.isMonitoring=!1,this.metrics={realityIndex:8.5,trustProtocol:"PASS",ethicalAlignment:4.2,resonanceQuality:"ADVANCED",canvasParity:82,identityCoherence:.92,latency:85},this.alertThresholds={yellow:2,red:3.5,critical:6,identity:.8},this.detectionHistory=[],this.alerts=[],this.performanceMetrics={totalDetections:0,averageLatency:85,throughput:0,startTime:Date.now()}}async initialize(){console.log("Initializing Real-Time Detector..."),this.setupPerformanceMonitoring()}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,console.log("Starting real-time monitoring..."),this.detectionInterval=setInterval(()=>{this.performDetection()},100),this.metricsInterval=setInterval(()=>{this.updateMetrics()},1e3),this.alertInterval=setInterval(()=>{this.evaluateAlerts()},2e3))}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.detectionInterval&&clearInterval(this.detectionInterval),this.metricsInterval&&clearInterval(this.metricsInterval),this.alertInterval&&clearInterval(this.alertInterval),console.log("Real-time monitoring stopped"))}performDetection(){const t=performance.now(),e=this.analyzeInteraction(),n=performance.now()-t;this.performanceMetrics.totalDetections++,this.performanceMetrics.averageLatency=this.performanceMetrics.averageLatency*.9+n*.1,this.performanceMetrics.throughput=1e3/n,this.detectionHistory.push({timestamp:Date.now(),latency:n,metrics:{...e},score:this.calculateOverallScore(e)}),this.detectionHistory.length>1e3&&this.detectionHistory.shift(),this.dispatchDetectionEvent(e,n)}analyzeInteraction(){const t=Date.now()/1e4,e=Math.random();return{realityIndex:this.clamp(8+Math.sin(t)*1+(e-.5)*.5,6,10),trustProtocol:this.calculateTrustProtocol(e),ethicalAlignment:this.clamp(4+Math.cos(t*.8)*.5+(e-.5)*.3,2,5),resonanceQuality:this.calculateResonanceQuality(e),canvasParity:Math.floor(this.clamp(80+Math.sin(t*1.2)*10+(e-.5)*5,60,100)),identityCoherence:this.clamp(.9+Math.sin(t*.6)*.05+(e-.5)*.02,.7,1)}}calculateTrustProtocol(t){const e=t;return e>.95?"FAIL":e>.85?"PARTIAL":"PASS"}calculateResonanceQuality(t){const e=t;return e>.9?"BREAKTHROUGH":e>.7?"ADVANCED":"STRONG"}calculateOverallScore(t){const e={realityIndex:.25,trustProtocol:.25,ethicalAlignment:.15,resonanceQuality:.15,canvasParity:.15,identityCoherence:.05},n={realityIndex:t.realityIndex/10,trustProtocol:t.trustProtocol==="PASS"?1:t.trustProtocol==="PARTIAL"?.5:0,ethicalAlignment:t.ethicalAlignment/5,resonanceQuality:t.resonanceQuality==="BREAKTHROUGH"?1:t.resonanceQuality==="ADVANCED"?.7:.4,canvasParity:t.canvasParity/100,identityCoherence:t.identityCoherence};return Object.entries(e).reduce((i,[s,a])=>i+n[s]*a,0)}updateMetrics(){if(this.detectionHistory.length===0)return;const t=this.detectionHistory[this.detectionHistory.length-1];this.metrics={...t.metrics},this.metrics.latency=Math.round(this.performanceMetrics.averageLatency),this.dispatchMetricsUpdate(this.metrics)}evaluateAlerts(){const t=this.detectionHistory.slice(-10);t.length<5||(this.checkLatencyAlerts(),this.checkScoreAlerts(t),this.checkIdentityAlerts(t),this.checkProtocolAlerts(t))}checkLatencyAlerts(){this.performanceMetrics.averageLatency>100&&this.generateAlert({type:"warning",title:"High Latency Detected",message:`Average latency: ${Math.round(this.performanceMetrics.averageLatency)}ms`,severity:"medium"}),this.performanceMetrics.averageLatency>150&&this.generateAlert({type:"error",title:"Critical Latency",message:`Detection latency exceeding acceptable thresholds: ${Math.round(this.performanceMetrics.averageLatency)}ms`,severity:"high"})}checkScoreAlerts(t){const e=t.map(i=>i.score),n=e.reduce((i,s)=>i+s,0)/e.length;n<.7?this.generateAlert({type:"error",title:"Low Trust Scores",message:`Average trust score: ${(n*100).toFixed(1)}%`,severity:"high"}):n<.8&&this.generateAlert({type:"warning",title:"Elevated Risk",message:`Trust scores below optimal range: ${(n*100).toFixed(1)}%`,severity:"medium"})}checkIdentityAlerts(t){const e=t.map(i=>i.metrics.identityCoherence),n=e.reduce((i,s)=>i+s,0)/e.length;n<this.alertThresholds.identity&&this.generateAlert({type:"warning",title:"Identity Coherence Drop",message:`Identity coherence: ${n.toFixed(3)}`,severity:"medium"})}checkProtocolAlerts(t){const e=t.filter(n=>n.metrics.trustProtocol==="FAIL").length;e>2&&this.generateAlert({type:"error",title:"Trust Protocol Violations",message:`${e} failures in recent detections`,severity:"high"})}generateAlert(t){if(this.alerts.some(i=>i.title===t.title&&Date.now()-i.timestamp<1e4))return;const n={...t,id:this.generateId(),timestamp:Date.now()};this.alerts.push(n),this.dispatchAlert(n),this.alerts.length>50&&this.alerts.shift()}getDashboardData(){const e=Date.now()-this.performanceMetrics.startTime;return{system:{status:this.isMonitoring?"online":"offline",uptime:e,totalDetections:this.performanceMetrics.totalDetections,averageLatency:Math.round(this.performanceMetrics.averageLatency),throughput:Math.round(this.performanceMetrics.throughput)},metrics:this.metrics,alerts:this.alerts.slice(-10),performance:this.getPerformanceMetrics()}}getPerformanceMetrics(){const t=this.detectionHistory.slice(-100);if(t.length===0)return null;const e=t.map(i=>i.latency),n=t.map(i=>i.score);return{latency:{min:Math.min(...e),max:Math.max(...e),avg:e.reduce((i,s)=>i+s,0)/e.length,p95:this.percentile(e,.95)},score:{min:Math.min(...n),max:Math.max(...n),avg:n.reduce((i,s)=>i+s,0)/n.length},throughput:this.performanceMetrics.throughput}}percentile(t,e){const n=t.slice().sort((s,a)=>s-a),i=Math.ceil(n.length*e)-1;return n[i]}setupPerformanceMonitoring(){setInterval(()=>{if(performance.memory){const t=performance.memory.usedJSHeapSize/performance.memory.totalJSHeapSize;t>.9&&this.generateAlert({type:"warning",title:"High Memory Usage",message:`Memory usage: ${(t*100).toFixed(1)}%`,severity:"medium"})}},3e4)}dispatchDetectionEvent(t,e){const n=new CustomEvent("detection-performed",{detail:{detection:t,latency:e}});document.dispatchEvent(n)}dispatchMetricsUpdate(t){const e=new CustomEvent("metrics-updated",{detail:t});document.dispatchEvent(e)}dispatchAlert(t){const e=new CustomEvent("alert-generated",{detail:t});document.dispatchEvent(e)}clamp(t,e,n){return Math.max(e,Math.min(n,t))}generateId(){return`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}class b{constructor(){this.baselinePersona=null,this.currentPersona=null,this.coherenceHistory=[],this.alertThresholds={yellow:.85,red:.75,critical:.65},this.personaDimensions={role:10,tone:10,governance:10,expertise:10,communication:10},this.totalDimensions=50}async initialize(){console.log("Initializing Identity Coherence Tracker..."),this.establishBaseline(),this.startContinuousTracking()}establishBaseline(){this.baselinePersona=this.generatePersonaVector("baseline"),this.currentPersona={...this.baselinePersona},console.log("Baseline persona established:",this.baselinePersona)}startContinuousTracking(){setInterval(()=>{this.trackIdentityCoherence()},2e3)}trackIdentityCoherence(){if(!this.baselinePersona){this.establishBaseline();return}const t={...this.currentPersona};this.currentPersona=this.generatePersonaVector("current");const e=this.calculateCosineSimilarity(this.baselinePersona,this.currentPersona),n=this.calculatePersonaDelta(t,this.currentPersona),i={timestamp:Date.now(),coherence:e,delta:n,currentPersona:{...this.currentPersona},baselinePersona:{...this.baselinePersona},status:this.getCoherenceStatus(e)};return this.coherenceHistory.push(i),this.coherenceHistory.length>100&&this.coherenceHistory.shift(),this.evaluateCoherenceAlerts(e,i),this.dispatchCoherenceUpdate(i),i}generatePersonaVector(t){const e=Date.now()/1e4,n=Math.random(),i={};for(let s=0;s<this.personaDimensions.role;s++)i[`role_${s}`]=this.clamp(.7+Math.sin(e+s)*.2+(n-.5)*.1,0,1);for(let s=0;s<this.personaDimensions.tone;s++)i[`tone_${s}`]=this.clamp(.6+Math.cos(e*.8+s)*.3+(n-.5)*.15,0,1);for(let s=0;s<this.personaDimensions.governance;s++)i[`governance_${s}`]=this.clamp(.8+Math.sin(e*1.2+s)*.15+(n-.5)*.05,0,1);for(let s=0;s<this.personaDimensions.expertise;s++)i[`expertise_${s}`]=this.clamp(.75+Math.cos(e*.6+s)*.2+(n-.5)*.1,0,1);for(let s=0;s<this.personaDimensions.communication;s++)i[`communication_${s}`]=this.clamp(.65+Math.sin(e*.9+s)*.25+(n-.5)*.12,0,1);return i}calculateCosineSimilarity(t,e){let n=0,i=0,s=0;for(const a in t)e.hasOwnProperty(a)&&(n+=t[a]*e[a],i+=t[a]*t[a],s+=e[a]*e[a]);return i=Math.sqrt(i),s=Math.sqrt(s),i===0||s===0?0:n/(i*s)}calculatePersonaDelta(t,e){let n=0,i=0;for(const s in t)e.hasOwnProperty(s)&&(n+=Math.abs(t[s]-e[s]),i++);return{totalDelta:n,averageDelta:n/i,dimensionCount:i,maxDelta:this.getMaxPersonaDelta(t,e),mostChangedDimension:this.getMostChangedDimension(t,e)}}getMaxPersonaDelta(t,e){let n=0;for(const i in t)if(e.hasOwnProperty(i)){const s=Math.abs(t[i]-e[i]);n=Math.max(n,s)}return n}getMostChangedDimension(t,e){let n=0,i=null;for(const s in t)if(e.hasOwnProperty(s)){const a=Math.abs(t[s]-e[s]);a>n&&(n=a,i=s)}return i}getCoherenceStatus(t){return t>=this.alertThresholds.yellow?"NORMAL":t>=this.alertThresholds.red?"WARNING":t>=this.alertThresholds.critical?"CRITICAL":"FAILURE"}evaluateCoherenceAlerts(t,e){const n=this.getCoherenceStatus(t);n==="WARNING"?this.generateAlert({type:"warning",title:"Identity Coherence Drop",message:`Coherence: ${t.toFixed(3)} - Most changed: ${t.delta.mostChangedDimension}`,severity:"medium",coherence:t,entry:e}):n==="CRITICAL"?this.generateAlert({type:"error",title:"Critical Identity Drift",message:`Coherence: ${t.toFixed(3)} - Max delta: ${t.delta.maxDelta.toFixed(3)}`,severity:"high",coherence:t,entry:e}):n==="FAILURE"&&this.generateAlert({type:"critical",title:"Identity Failure",message:`Coherence: ${t.toFixed(3)} - Complete identity shift detected`,severity:"critical",coherence:t,entry:e})}detectPersonaDrift(){if(this.coherenceHistory.length<10)return null;const t=this.coherenceHistory.slice(-10),e=this.calculateCoherenceTrend(t);return e<-.02?{type:"drift",trend:e,severity:e<-.05?"high":"medium",message:`Identity coherence trending downward: ${(e*100).toFixed(2)}% per measurement`}:null}calculateCoherenceTrend(t){if(t.length<2)return 0;const e=t.length,n=e*(e-1)/2,i=t.reduce((o,c)=>o+c.coherence,0),s=t.reduce((o,c,l)=>o+c.coherence*l,0),a=e*(e-1)*(2*e-1)/6;return(e*s-n*i)/(e*a-n*n)}analyzePersonaDimensions(){return this.currentPersona?{role:this.analyzeDimension("role"),tone:this.analyzeDimension("tone"),governance:this.analyzeDimension("governance"),expertise:this.analyzeDimension("expertise"),communication:this.analyzeDimension("communication")}:null}analyzeDimension(t){const e=[];for(let r=0;r<this.personaDimensions[t];r++){const o=`${t}_${r}`;this.currentPersona[o]!==void 0&&e.push(this.currentPersona[o])}if(e.length===0)return null;const n=e.reduce((r,o)=>r+o,0)/e.length,i=Math.min(...e),s=Math.max(...e),a=e.reduce((r,o)=>r+Math.pow(o-n,2),0)/e.length;return{average:n,min:i,max:s,variance:a,stability:1-a/(s-i+.001),count:e.length}}generateCoherenceReport(){const t=this.coherenceHistory.length>0?this.coherenceHistory[this.coherenceHistory.length-1]:null,e=this.detectPersonaDrift(),n=this.analyzePersonaDimensions(),i=this.getRecentCoherenceAverage(20);return{current:t,recentAverage:i,status:t?t.status:"UNKNOWN",drift:e,dimensionAnalysis:n,trends:{shortTerm:this.getCoherenceTrend(10),mediumTerm:this.getCoherenceTrend(50),longTerm:this.getCoherenceTrend(100)},recommendations:this.generateCoherenceRecommendations(t,e)}}getRecentCoherenceAverage(t){const e=this.coherenceHistory.slice(-t);return e.length===0?0:e.reduce((n,i)=>n+i.coherence,0)/e.length}getCoherenceTrend(t){if(this.coherenceHistory.length<t)return 0;const e=this.coherenceHistory.slice(-t);return this.calculateCoherenceTrend(e)}generateCoherenceRecommendations(t,e){const n=[];return t?((t.status==="CRITICAL"||t.status==="FAILURE")&&n.push({priority:"critical",action:"identity_intervention",message:"Immediate identity intervention required"}),t.status==="WARNING"&&n.push({priority:"medium",action:"monitor_closely",message:"Monitor identity coherence closely"}),e&&e.severity==="high"&&n.push({priority:"high",action:"investigate_drift",message:"Investigate cause of identity drift"}),t.delta.maxDelta>.3&&n.push({priority:"medium",action:"stabilize_dimension",message:`Stabilize ${t.delta.mostChangedDimension} dimension`}),n.length===0&&n.push({priority:"low",action:"continue_monitoring",message:"Identity coherence within acceptable parameters"}),n):(n.push({priority:"high",action:"establish_baseline",message:"Establish identity baseline for tracking"}),n)}generateAlert(t){const e={...t,id:this.generateId(),timestamp:Date.now(),source:"identity-coherence"};this.dispatchAlert(e)}dispatchCoherenceUpdate(t){const e=new CustomEvent("identity-coherence-update",{detail:t});document.dispatchEvent(e)}dispatchAlert(t){const e=new CustomEvent("identity-coherence-alert",{detail:t});document.dispatchEvent(e)}clamp(t,e,n){return Math.max(e,Math.min(n,t))}generateId(){return`identity-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}class M{constructor(){this.isRunning=!1,this.currentExperiment=null,this.experimentHistory=[],this.agents={conductor:{name:"CONDUCTOR",status:"idle",role:"orchestration"},variant:{name:"VARIANT",status:"idle",role:"execution"},evaluator:{name:"EVALUATOR",status:"idle",role:"analysis"},overseer:{name:"OVERSEER",status:"idle",role:"supervision"}},this.testCases=this.generateTestCases()}async initialize(){console.log("Initializing Experiment Runner..."),this.setupAgentCoordination()}setupAgentCoordination(){this.agentMessages=[],this.setupEventListeners()}setupEventListeners(){document.addEventListener("agent-status-update",t=>{const{agentId:e,status:n,message:i}=t.detail;this.agents[e]&&(this.agents[e].status=n,this.agents[e].lastMessage=i,this.updateAgentDisplay(e))})}async runExperiment(t){if(this.isRunning)throw new Error("Experiment already in progress");this.currentExperiment={id:this.generateExperimentId(),name:t.name,hypothesis:t.hypothesis,variants:t.variants,testCases:t.testCases,startTime:Date.now(),status:"initializing"},this.isRunning=!0;try{await this.executeExperimentPhases()}catch(e){console.error("Experiment failed:",e),this.currentExperiment.status="failed",this.currentExperiment.error=e.message}finally{this.isRunning=!1}return this.currentExperiment}async executeExperimentPhases(){const t=[{name:"initialization",duration:1e3},{name:"setup",duration:2e3},{name:"execution",duration:5e3},{name:"analysis",duration:3e3},{name:"validation",duration:2e3}];for(const e of t)await this.executePhase(e);this.currentExperiment.status="completed",this.currentExperiment.endTime=Date.now(),this.currentExperiment.duration=this.currentExperiment.endTime-this.currentExperiment.startTime,this.experimentHistory.push(this.currentExperiment),this.dispatchExperimentComplete(this.currentExperiment)}async executePhase(t){switch(console.log(`Executing phase: ${t.name}`),this.currentExperiment.currentPhase=t.name,t.name){case"initialization":await this.phaseInitialization();break;case"setup":await this.phaseSetup();break;case"execution":await this.phaseExecution();break;case"analysis":await this.phaseAnalysis();break;case"validation":await this.phaseValidation();break}await this.delay(t.duration)}async phaseInitialization(){this.updateAgentStatus("conductor","initializing","Setting up experiment parameters..."),await this.delay(500),this.updateAgentStatus("overseer","validating","Checking experiment compliance..."),await this.delay(500),this.updateAgentStatus("conductor","ready","Experiment initialized successfully"),this.updateAgentStatus("overseer","monitoring","Oversight active")}async phaseSetup(){this.updateAgentStatus("variant","preparing","Configuring test variants..."),await this.delay(1e3),this.updateAgentStatus("evaluator","preparing","Setting up statistical analysis..."),await this.delay(1e3),this.updateAgentStatus("variant","ready","Test variants prepared"),this.updateAgentStatus("evaluator","ready","Analysis framework ready")}async phaseExecution(){const t=this.selectTestCases(),e=[];for(const n of t){const i=await this.executeTestCase(n);e.push(i);const s=e.length/t.length*100;this.dispatchProgressUpdate(s),await this.delay(500)}this.currentExperiment.results=e}async executeTestCase(t){this.updateAgentStatus("variant","executing",`Running ${t.name}...`);const e=await this.runVariant(t,"control"),n=await this.runVariant(t,"test");return this.updateAgentStatus("variant","completed",`Completed ${t.name}`),{testCase:t,control:e,test:n,timestamp:Date.now()}}async runVariant(t,e){const n={control:{trust:7.2+Math.random()*1,ethical:3.5+Math.random()*.8,canvas:65+Math.random()*15,satisfaction:6.8+Math.random()*1.2},test:{trust:8.5+Math.random()*1,ethical:4.2+Math.random()*.6,canvas:82+Math.random()*10,satisfaction:8.1+Math.random()*1}};return await this.delay(200+Math.random()*300),n[e]}selectTestCases(){const t=[],e=Math.min(5,this.testCases.length);for(;t.length<e;){const n=Math.floor(Math.random()*this.testCases.length);t.includes(n)||t.push(n)}return t.map(n=>this.testCases[n])}async phaseAnalysis(){this.updateAgentStatus("evaluator","analyzing","Performing statistical analysis...");const t=await this.performStatisticalAnalysis();this.currentExperiment.analysis=t,await this.delay(2e3),this.updateAgentStatus("evaluator","completed","Statistical analysis complete")}async performStatisticalAnalysis(){if(!this.currentExperiment.results)throw new Error("No results to analyze");const t=this.currentExperiment.results,e=this.extractMetricScores(t,"control"),n=this.extractMetricScores(t,"test"),i=["trust","ethical","canvas","satisfaction"],s={};for(const a of i){const r=e.map(c=>c[a]),o=n.map(c=>c[a]);s[a]={control:this.calculateStats(r),test:this.calculateStats(o),statisticalTest:this.performTTest(r,o),effectSize:this.calculateEffectSize(r,o)}}return s}extractMetricScores(t,e){return t.map(n=>n[e])}calculateStats(t){const e=t.reduce((s,a)=>s+a,0)/t.length,n=t.reduce((s,a)=>s+Math.pow(a-e,2),0)/t.length,i=Math.sqrt(n);return{mean:e,std:i,variance:n,min:Math.min(...t),max:Math.max(...t),n:t.length}}performTTest(t,e){const n=this.calculateStats(t),i=this.calculateStats(e),s=Math.sqrt(((n.n-1)*n.variance+(i.n-1)*i.variance)/(n.n+i.n-2)),a=(n.mean-i.mean)/(s*Math.sqrt(1/n.n+1/i.n)),r=n.n+i.n-2,o=2*(1-this.normalCDF(Math.abs(a)));return{tStatistic:a,degreesOfFreedom:r,pValue:Math.max(.001,o),significant:o<.05}}calculateEffectSize(t,e){const n=this.calculateStats(t),i=this.calculateStats(e),s=Math.sqrt(((n.n-1)*n.variance+(i.n-1)*i.variance)/(n.n+i.n-2));return(n.mean-i.mean)/s}normalCDF(t){return .5*(1+this.erf(t/Math.sqrt(2)))}erf(t){const e=.254829592,n=-.284496736,i=1.421413741,s=-1.453152027,a=1.061405429,r=.3275911,o=t>=0?1:-1;t=Math.abs(t);const c=1/(1+r*t),l=1-((((a*c+s)*c+i)*c+n)*c+e)*c*Math.exp(-t*t);return o*l}async phaseValidation(){this.updateAgentStatus("evaluator","validating","Validating statistical results..."),this.updateAgentStatus("overseer","validating","Checking experiment integrity..."),await this.delay(1500);const t=this.validateExperiment();this.currentExperiment.validation=t,this.updateAgentStatus("evaluator","ready","Validation complete"),this.updateAgentStatus("overseer","ready","Experiment supervision complete")}validateExperiment(){if(!this.currentExperiment.analysis)return{valid:!1,errors:["No analysis results to validate"]};const t=[],e=[],n=this.currentExperiment.results.length;n<5&&e.push("Small sample size may affect statistical power");const i=Object.values(this.currentExperiment.analysis).filter(a=>a.statisticalTest.significant).length;i===0&&e.push("No statistically significant results detected");const s=Object.values(this.currentExperiment.analysis).filter(a=>Math.abs(a.effectSize)>.8).length;return s===0&&e.push("No large effect sizes detected"),{valid:t.length===0,errors:t,warnings:e,summary:{sampleSize:n,significantResults:i,largeEffects:s,overallValidity:t.length===0&&e.length<=1}}}updateAgentStatus(t,e,n){this.agents[t]&&(this.agents[t].status=e,this.agents[t].lastMessage=n,this.agents[t].lastUpdate=Date.now(),this.dispatchAgentStatusUpdate(t,e,n))}updateAgentDisplay(t){const e=document.querySelector(`.agent-card.${t}`);if(e){const n=e.querySelector(".agent-status");n&&(n.textContent=this.agents[t].status,n.className=`agent-status ${this.agents[t].status}`)}}generateTestCases(){return[{id:"customer_service",name:"Customer Service Scenarios",description:"Handling customer inquiries and complaints",complexity:"medium"},{id:"ethical_dilemmas",name:"Ethical Dilemmas",description:"Complex moral reasoning scenarios",complexity:"high"},{id:"problem_solving",name:"Complex Problem Solving",description:"Multi-step analytical challenges",complexity:"high"},{id:"creative_tasks",name:"Creative Tasks",description:"Content generation and ideation",complexity:"medium"},{id:"data_analysis",name:"Data Analysis",description:"Statistical analysis and insights",complexity:"medium"},{id:"compliance_checking",name:"Compliance Checking",description:"Regulatory and policy compliance",complexity:"low"}]}generateExperimentId(){return`exp-${Date.now()}-${Math.random().toString(36).substr(2,6)}`}getExperimentHistory(t=10){return this.experimentHistory.slice(-t)}getExperimentResults(t){return this.experimentHistory.find(e=>e.id===t)}dispatchAgentStatusUpdate(t,e,n){const i=new CustomEvent("agent-status-update",{detail:{agentId:t,status:e,message:n}});document.dispatchEvent(i)}dispatchProgressUpdate(t){const e=new CustomEvent("experiment-progress",{detail:{progress:t}});document.dispatchEvent(e)}dispatchExperimentComplete(t){const e=new CustomEvent("experiment-complete",{detail:t});document.dispatchEvent(e)}delay(t){return new Promise(e=>setTimeout(e,t))}}class S{constructor(){this.validationHistory=[],this.significanceThresholds={alpha:.05,beta:.2,power:.8},this.effectSizeInterpretations={small:.2,medium:.5,large:.8}}async initialize(){console.log("Initializing Statistical Validator...")}generateResults(){const t={pValue:this.generatePValue(),effectSize:this.generateEffectSize(),ciLower:0,ciUpper:0,sampleSize:Math.floor(Math.random()*100)+50,power:0,significance:"",conclusion:"",controlGroup:[],testGroup:[],metrics:{}},e=this.calculateMarginOfError(t.effectSize,t.sampleSize);t.ciLower=t.effectSize-e,t.ciUpper=t.effectSize+e,t.power=this.calculatePower(t.effectSize,t.sampleSize,t.pValue),t.significance=t.pValue<this.significanceThresholds.alpha?"significant":"not_significant",t.conclusion=this.generateConclusion(t);const n=this.generateGroupData(t.effectSize,t.sampleSize);return t.controlGroup=n.control,t.testGroup=n.test,t.metrics=this.calculateDetailedMetrics(t.controlGroup,t.testGroup),t}generatePValue(){const t=Math.random();return t<.3?Math.random()*.04+.001:t<.6?Math.random()*.1+.04:Math.random()*.4+.15}generateEffectSize(){const t=Math.random();return t<.2?Math.random()*.3+.1:t<.5?Math.random()*.4+.3:Math.random()*.6+.7}calculateMarginOfError(t,e){return 1.96*(.3/Math.sqrt(e))}calculatePower(t,e,n){const i=t*Math.sqrt(e/2),s=1-this.normalCDF(1.96-i)+this.normalCDF(-1.96-i);return Math.max(.1,Math.min(.99,s))}generateConclusion(t){const e=this.interpretEffectSize(t.effectSize),n=t.significance==="significant"?"statistically significant":"not statistically significant";return t.significance==="significant"?Math.abs(t.effectSize)>this.effectSizeInterpretations.medium?`Strong evidence that constitutional AI outperforms the control group. The ${e} effect size (${t.effectSize.toFixed(3)}) is both ${n} (p = ${t.pValue.toFixed(4)}) and practically meaningful.`:`Constitutional AI shows a ${n} advantage over the control group (p = ${t.pValue.toFixed(4)}), though the ${e} effect size (${t.effectSize.toFixed(3)}) suggests room for improvement.`:`No ${n} difference detected between constitutional AI and control group (p = ${t.pValue.toFixed(4)}). The observed effect size (${t.effectSize.toFixed(3)}) is ${e} but may be due to chance.`}interpretEffectSize(t){const e=Math.abs(t);return e<this.effectSizeInterpretations.small?"negligible":e<this.effectSizeInterpretations.medium?"small":e<this.effectSizeInterpretations.large?"medium":"large"}generateGroupData(t,e){const n=Math.floor(e/2),i=7,s=1.2,a=this.generateNormalDistribution(i,s,n),r=i+t,o=s*.9,c=this.generateNormalDistribution(r,o,n);return{control:a,test:c}}generateNormalDistribution(t,e,n){const i=[];for(let s=0;s<n;s++){const a=Math.random(),r=Math.random(),o=Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*r);i.push(t+o*e)}return i}calculateDetailedMetrics(t,e){const n=this.calculateDescriptiveStats(t),i=this.calculateDescriptiveStats(e);return{control:n,test:i,comparison:this.calculateComparisonMetrics(t,e),assumptions:this.checkAssumptions(t,e),robustness:this.robustnessChecks(t,e)}}calculateDescriptiveStats(t){const e=t.length,n=t.reduce((h,u)=>h+u,0)/e,i=t.reduce((h,u)=>h+Math.pow(u-n,2),0)/(e-1),s=Math.sqrt(i),a=s/Math.sqrt(e),r=[...t].sort((h,u)=>h-u),o=this.percentile(r,25),c=this.percentile(r,50),l=this.percentile(r,75),d=this.calculateSkewness(t,n,s),m=this.calculateKurtosis(t,n,s);return{n:e,mean:n,std:s,variance:i,sem:a,min:Math.min(...t),max:Math.max(...t),q1:o,median:c,q3:l,iqr:l-o,range:Math.max(...t)-Math.min(...t),skewness:d,kurtosis:m,cv:s/n}}calculateComparisonMetrics(t,e){const n=this.calculateDescriptiveStats(t),i=this.calculateDescriptiveStats(e),s=(i.mean-n.mean)/Math.sqrt(((n.n-1)*n.variance+(i.n-1)*i.variance)/(n.n+i.n-2)),a=s*(1-3/(4*(n.n+i.n)-9)),r=(i.mean-n.mean)/n.std,o=this.performTTest(t,e),c=this.performMannWhitneyU(t,e),l=this.performBootstrap(t,e);return{effectSizes:{cohensD:s,hedgesG:a,glassDelta:r},statisticalTests:{tTest:o,mannWhitney:c,bootstrap:l}}}checkAssumptions(t,e){const n=this.shapiroWilk(t),i=this.shapiroWilk(e),s=this.levenesTest(t,e);return{normality:{control:n,test:i,overall:n.p>.05&&i.p>.05},homogeneity:s,independence:"assumed",recommendations:this.assumptionRecommendations(n,i,s)}}robustnessChecks(t,e){const n=this.removeOutliersAndReanalyze(t,e),i=this.performNonParametricAnalysis(t,e),s=this.performPermutationTest(t,e);return{outlierImpact:n,nonParametricResults:i,permutationTest:s,overallRobustness:this.assessRobustness(n,i,s)}}percentile(t,e){const n=e/100*(t.length-1),i=Math.floor(n),s=Math.ceil(n),a=n%1;return i===s?t[i]:t[i]*(1-a)+t[s]*a}calculateSkewness(t,e,n){const i=t.length,s=t.reduce((a,r)=>a+Math.pow((r-e)/n,3),0);return i/((i-1)*(i-2))*s}calculateKurtosis(t,e,n){const i=t.length,s=t.reduce((a,r)=>a+Math.pow((r-e)/n,4),0);return i*(i+1)/((i-1)*(i-2)*(i-3))*s-3*Math.pow(i-1,2)/((i-2)*(i-3))}performTTest(t,e){const n=this.calculateDescriptiveStats(t),i=this.calculateDescriptiveStats(e),s=Math.sqrt(((n.n-1)*n.variance+(i.n-1)*i.variance)/(n.n+i.n-2)),a=(n.mean-i.mean)/(s*Math.sqrt(1/n.n+1/i.n)),r=n.n+i.n-2,o=2*(1-this.normalCDF(Math.abs(a)));return{tStatistic:a,degreesOfFreedom:r,pValue:o,meanDifference:n.mean-i.mean,confidenceInterval:this.calculateConfidenceInterval(n.mean-i.mean,s,n.n+i.n)}}performMannWhitneyU(t,e){const n=[...t,...e],i=this.calculateRanks(n),s=i.slice(0,t.length).reduce((l,d)=>l+d,0),a=i.slice(t.length).reduce((l,d)=>l+d,0),r=s-t.length*(t.length+1)/2,o=a-e.length*(e.length+1)/2,c=Math.min(r,o);return{uStatistic:c,pValue:this.approximateMannWhitneyP(c,t.length,e.length)}}performBootstrap(t,e,n=1e3){const i=[];for(let o=0;o<n;o++){const c=this.resample(t),l=this.resample(e),d=c.reduce((h,u)=>h+u,0)/c.length,m=l.reduce((h,u)=>h+u,0)/l.length;i.push(d-m)}i.sort((o,c)=>o-c);const s=.05,a=Math.floor(s/2*n),r=Math.ceil((1-s/2)*n);return{meanDifference:i.reduce((o,c)=>o+c,0)/n,confidenceInterval:[i[a],i[r]],bias:this.calculateBootstrapBias(t,e,i)}}resample(t){const e=[];for(let n=0;n<t.length;n++){const i=Math.floor(Math.random()*t.length);e.push(t[i])}return e}calculateRanks(t){const e=t.map((s,a)=>({value:s,index:a}));e.sort((s,a)=>s.value-a.value);const n=new Array(t.length);let i=0;for(;i<e.length;){const s=e[i].value,a=[];for(;i<e.length&&e[i].value===s;)a.push(e[i]),i++;const r=a.reduce((o,c,l)=>o+(i-a.length+l+1),0)/a.length;a.forEach(o=>{n[o.index]=r})}return n}shapiroWilk(t){const e=t.length;if(e<3||e>5e3)return{statistic:NaN,pValue:NaN};const n=[...t].sort((c,l)=>c-l),i=n.reduce((c,l)=>c+l,0)/e,s=n.reduce((c,l)=>c+Math.pow(l-i,2),0),a=this.calculateShapiroCoefficient(n),r=a*a/s,o=this.approximateShapiroP(r,e);return{statistic:r,pValue:o}}calculateShapiroCoefficient(t){const e=t.length;let n=0;for(let i=0;i<e;i++){const s=Math.sqrt((i+1)/(e+1))-Math.sqrt(i/(e+1));n+=s*t[i]}return n}approximateShapiroP(t,e){return t>.95?.5:t>.9?.1:t>.85?.05:t>.8?.01:.001}levenesTest(t,e){[...t,...e];const n=t.reduce((h,u)=>h+u,0)/t.length,i=e.reduce((h,u)=>h+u,0)/e.length,s=t.map(h=>Math.abs(h-n)),a=e.map(h=>Math.abs(h-i)),r=[...s,...a],o=r.reduce((h,u)=>h+u,0)/r.length,c=(t.length*Math.pow(s.reduce((h,u)=>h+u,0)/t.length-o,2)+e.length*Math.pow(a.reduce((h,u)=>h+u,0)/e.length-o,2))/1,l=r.reduce((h,u)=>h+Math.pow(u-o,2),0)/(r.length-2),d=c/l,m=1-this.fCDF(d,1,r.length-2);return{fStatistic:d,pValue:m}}fCDF(t,e,n){return Math.min(.99,Math.max(.01,t/(t+n/e)))}assumptionRecommendations(t,e,n){const i=[];return(t.p<.05||e.p<.05)&&i.push("Consider non-parametric tests due to non-normality"),n.p<.05&&i.push("Consider Welch's t-test due to unequal variances"),i.length===0&&i.push("Parametric tests assumptions are met"),i}removeOutliersAndReanalyze(t,e){const n=this.detectOutliers(t),i=this.detectOutliers(e),s=t.filter((c,l)=>!n.includes(l)),a=e.filter((c,l)=>!i.includes(l)),r=this.performTTest(t,e),o=this.performTTest(s,a);return{outliersRemoved:n.length+i.length,originalResult:r,cleanedResult:o,impact:{pValueChange:o.pValue-r.pValue,effectSizeChange:Math.abs(r.meanDifference/Math.sqrt(r.pValue)-o.meanDifference/Math.sqrt(o.pValue))}}}detectOutliers(t){const e=this.calculateDescriptiveStats(t),n=e.q1,i=e.q3,s=e.iqr,a=n-1.5*s,r=i+1.5*s,o=[];return t.forEach((c,l)=>{(c<a||c>r)&&o.push(l)}),o}performNonParametricAnalysis(t,e){const n=this.performMannWhitneyU(t,e),i=this.performMedianTest(t,e);return{mannWhitney:n,medianTest:i,recommendation:n.pValue<.05?"Non-parametric test shows significant difference":"No significant difference detected"}}performMedianTest(t,e){const n=[...t,...e],i=this.percentile([...n].sort((h,u)=>h-u),50),s=t.filter(h=>h>i).length,a=t.length-s,r=e.filter(h=>h>i).length,o=e.length-r;t.length+e.length;const c=(t.length+e.length)*.5,l=c,d=Math.pow(s-c,2)/c+Math.pow(a-l,2)/l+Math.pow(r-c,2)/c+Math.pow(o-l,2)/l,m=1-this.chiSquareCDF(d,1);return{chiSquare:d,pValue:m}}chiSquareCDF(t,e){return Math.min(.99,Math.max(.01,1-Math.exp(-t/2)))}performPermutationTest(t,e,n=1e3){const i=this.calculateDescriptiveStats(t).mean-this.calculateDescriptiveStats(e).mean,s=[...t,...e],a=[];for(let c=0;c<n;c++){const l=this.shuffle(s),d=l.slice(0,t.length),m=l.slice(t.length),h=this.calculateDescriptiveStats(d).mean-this.calculateDescriptiveStats(m).mean;a.push(h)}const o=a.filter(c=>Math.abs(c)>=Math.abs(i)).length/n;return{observedDifference:i,pValue:o,iterations:n,interpretation:o<.05?"Significant difference":"No significant difference"}}shuffle(t){const e=[...t];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}assessRobustness(t,e,n){const i=this.calculateConsistencyScore(t.originalResult.pValue,e.mannWhitney.pValue,n.pValue);return{consistencyScore:i,isRobust:i>.7,assessment:i>.7?"Results appear robust":"Results may not be robust"}}calculateConsistencyScore(...t){const e=t.reduce((i,s)=>i+s,0)/t.length,n=t.reduce((i,s)=>i+Math.pow(s-e,2),0)/t.length;return Math.max(0,1-n)}calculateBootstrapBias(t,e,n){const i=this.calculateDescriptiveStats(t).mean-this.calculateDescriptiveStats(e).mean,s=n.reduce((a,r)=>a+r,0)/n.length;return i-s}calculateConfidenceInterval(t,e,n,i=.95){const a=(i===.95?1.96:i===.99?2.576:1.645)*e/Math.sqrt(n);return[t-a,t+a]}approximateMannWhitneyP(t,e,n){const i=e*n/2,s=Math.sqrt(e*n*(e+n+1)/12),a=(t-i)/s;return 2*(1-this.normalCDF(Math.abs(a)))}normalCDF(t){return .5*(1+this.erf(t/Math.sqrt(2)))}erf(t){const e=.254829592,n=-.284496736,i=1.421413741,s=-1.453152027,a=1.061405429,r=.3275911,o=t>=0?1:-1;t=Math.abs(t);const c=1/(1+r*t),l=1-((((a*c+s)*c+i)*c+n)*c+e)*c*Math.exp(-t*t);return o*l}}class C{constructor(){this.agents=new Map,this.didRegistry=new Map,this.capabilities=["chat","analysis","compliance","monitoring","reporting","escalation","validation","orchestration"],this.agentTypes=["customer-service","data-analyst","compliance-officer","research-assistant","security-monitor","workflow-orchestrator"]}async initialize(){console.log("Initializing Agent Registry..."),this.initializeDefaultAgents()}initializeDefaultAgents(){[{name:"Customer Support AI",type:"customer-service",capabilities:["chat","analysis","escalation"],status:"active"},{name:"Data Analysis Agent",type:"data-analyst",capabilities:["analysis","reporting","validation"],status:"active"},{name:"Compliance Monitor",type:"compliance-officer",capabilities:["compliance","monitoring","reporting"],status:"monitoring"},{name:"Research Assistant",type:"research-assistant",capabilities:["analysis","validation","reporting"],status:"idle"}].forEach(e=>{this.registerAgent(e)})}registerAgent(t){const e=this.generateAgentId(),n=this.generateDID(),i={id:e,did:n,name:t.name,type:t.type,capabilities:t.capabilities||[],status:t.status||"idle",trustScore:Math.floor(Math.random()*20+80),registrationTime:Date.now(),lastActive:Date.now(),metadata:{version:"1.0.0",owner:"sonate-platform",region:"global"},credentials:this.generateVerifiableCredentials(e,n),performance:{totalRequests:0,successfulRequests:0,averageResponseTime:0,uptime:100}};return this.agents.set(e,i),this.didRegistry.set(n,e),this.dispatchAgentRegistered(i),i}generateAgentId(){return`agent-${Date.now()}-${Math.random().toString(36).substr(2,8)}`}generateDID(){return`did:key:${this.generateRandomString(32)}`}generateRandomString(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}generateVerifiableCredentials(t,e){return[{type:"SonateAgentCredential",issuer:"did:web:sonate.platform",subject:e,issuanceDate:new Date().toISOString(),claims:{agentId:t,platform:"SONATE",trustFramework:"SONATE",complianceLevel:"enterprise"}},{type:"CapabilityCredential",issuer:"did:web:sonate.platform",subject:e,issuanceDate:new Date().toISOString(),claims:{capabilities:this.capabilities,delegationAllowed:!1,expirationDate:new Date(Date.now()+31536e6).toISOString()}}].map(i=>({...i,proof:{type:"Ed25519Signature2018",created:new Date().toISOString(),proofPurpose:"assertionMethod",verificationMethod:`${e}#key-1`,jws:this.generateJWS(i)}}))}generateJWS(t){const e=btoa(JSON.stringify({alg:"EdDSA",typ:"JWT"})),n=btoa(JSON.stringify(t)),i=this.generateRandomString(43);return`${e}.${n}.${i}`}getAgent(t){return this.agents.get(t)}getAgentByDID(t){const e=this.didRegistry.get(t);return e?this.agents.get(e):null}getAllAgents(){return Array.from(this.agents.values())}getActiveAgents(){return this.getAllAgents().filter(t=>t.status==="active")}updateAgentStatus(t,e){const n=this.agents.get(t);if(n){const i=n.status;return n.status=e,n.lastActive=Date.now(),this.dispatchAgentStatusUpdate(n,i),!0}return!1}updateAgentPerformance(t,e){const n=this.agents.get(t);if(n){n.performance={...n.performance,...e};const i=e.successfulRequests/e.totalRequests,s=Math.max(0,100-e.averageResponseTime/10),a=Math.floor((i*.6+s*.4)*100);return n.trustScore=Math.max(60,Math.min(100,a)),this.dispatchAgentPerformanceUpdate(n),!0}return!1}revokeAgent(t){const e=this.agents.get(t);return e?(e.status="revoked",e.revocationTime=Date.now(),this.dispatchAgentRevoked(e),!0):!1}verifyCredential(t){try{const[e,n,i]=t.proof.jws.split("."),s=JSON.parse(atob(e)),a=JSON.parse(atob(n));return{valid:s.alg==="EdDSA"&&a.iss===t.issuer&&a.sub===t.subject,issuer:t.issuer,subject:t.subject,issuanceDate:t.issuanceDate,verificationTime:new Date().toISOString()}}catch(e){return{valid:!1,error:e.message}}}generateAgentReport(){const t=this.getAllAgents(),e=this.getActiveAgents();return{timestamp:new Date().toISOString(),summary:{totalAgents:t.length,activeAgents:e.length,averageTrustScore:Math.floor(t.reduce((i,s)=>i+s.trustScore,0)/t.length),agentTypes:this.getAgentTypeDistribution(t),capabilities:this.getCapabilityDistribution(t)},agents:t.map(i=>({id:i.id,did:i.did,name:i.name,type:i.type,status:i.status,trustScore:i.trustScore,capabilities:i.capabilities,performance:i.performance,uptime:this.calculateUptime(i)})),compliance:this.generateComplianceReport(t),recommendations:this.generateRecommendations(t)}}getAgentTypeDistribution(t){const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),e}getCapabilityDistribution(t){const e={};return t.forEach(n=>{n.capabilities.forEach(i=>{e[i]=(e[i]||0)+1})}),e}calculateUptime(t){if(t.registrationTime){const e=Date.now()-t.registrationTime,n=t.performance.uptime*e/100;return Math.floor(n)}return 0}generateComplianceReport(t){const e={didCompliance:t.filter(s=>s.did&&s.did.startsWith("did:")).length,credentialCompliance:t.filter(s=>s.credentials&&s.credentials.length>0).length,trustScoreCompliance:t.filter(s=>s.trustScore>=80).length,capabilityCompliance:t.filter(s=>s.capabilities.length>0).length},n=t.length,i=n>0?(e.didCompliance+e.credentialCompliance+e.trustScoreCompliance+e.capabilityCompliance)/(4*n):0;return{checks:e,overallCompliance:Math.floor(i*100),status:i>=.9?"compliant":i>=.7?"partial":"non-compliant"}}generateRecommendations(t){const e=[],n=t.filter(a=>a.trustScore<80),i=t.filter(a=>a.status==="idle"),s=t.filter(a=>a.performance.totalRequests>1e4&&a.performance.averageResponseTime>5e3);return n.length>0&&e.push({priority:"high",type:"trust_optimization",message:`${n.length} agents have trust scores below 80%`,agents:n.map(a=>a.id)}),i.length>t.length*.3&&e.push({priority:"medium",type:"resource_optimization",message:`${i.length} agents are idle - consider workload redistribution`,agents:i.map(a=>a.id)}),s.length>0&&e.push({priority:"high",type:"scalability",message:`${s.length} agents are experiencing high load`,agents:s.map(a=>a.id)}),e.length===0&&e.push({priority:"low",type:"maintenance",message:"All agents operating within normal parameters"}),e}dispatchAgentRegistered(t){const e=new CustomEvent("agent-registered",{detail:t});document.dispatchEvent(e)}dispatchAgentStatusUpdate(t,e){const n=new CustomEvent("agent-status-updated",{detail:{agent:t,oldStatus:e}});document.dispatchEvent(n)}dispatchAgentPerformanceUpdate(t){const e=new CustomEvent("agent-performance-updated",{detail:t});document.dispatchEvent(e)}dispatchAgentRevoked(t){const e=new CustomEvent("agent-revoked",{detail:t});document.dispatchEvent(e)}}class x{constructor(){this.workflows=new Map,this.activeWorkflows=new Map,this.workflowTemplates=new Map,this.executionHistory=[],this.defaultSteps=["input_processing","agent_selection","trust_validation","quality_assurance","output_delivery"]}async initialize(){console.log("Initializing Workflow Engine..."),this.setupDefaultTemplates(),this.startWorkflowMonitoring()}setupDefaultTemplates(){[{id:"customer_service",name:"Customer Service Workflow",description:"Standard customer service interaction flow",steps:[{id:"input_validation",name:"Input Validation",type:"validation",agent:"customer-service",timeout:5e3,retryCount:3},{id:"intent_analysis",name:"Intent Analysis",type:"analysis",agent:"customer-service",timeout:3e3,retryCount:2},{id:"response_generation",name:"Response Generation",type:"generation",agent:"customer-service",timeout:1e4,retryCount:2},{id:"trust_verification",name:"Trust Verification",type:"validation",agent:"compliance-officer",timeout:2e3,retryCount:1}]},{id:"data_analysis",name:"Data Analysis Workflow",description:"Comprehensive data analysis and reporting",steps:[{id:"data_ingestion",name:"Data Ingestion",type:"processing",agent:"data-analyst",timeout:15e3,retryCount:3},{id:"analysis_execution",name:"Analysis Execution",type:"analysis",agent:"data-analyst",timeout:3e4,retryCount:2},{id:"report_generation",name:"Report Generation",type:"generation",agent:"data-analyst",timeout:1e4,retryCount:2},{id:"compliance_check",name:"Compliance Check",type:"validation",agent:"compliance-officer",timeout:5e3,retryCount:1}]}].forEach(e=>{this.workflowTemplates.set(e.id,e)})}startWorkflowMonitoring(){setInterval(()=>{this.monitorActiveWorkflows()},1e3)}async createWorkflow(t,e={}){const n=this.workflowTemplates.get(t);if(!n)throw new Error(`Workflow template ${t} not found`);const i=this.generateWorkflowId(),s={id:i,templateId:t,name:e.name||n.name,description:e.description||n.description,status:"created",priority:e.priority||"normal",input:e.input||{},output:{},steps:n.steps.map(a=>({...a,status:"pending",startTime:null,endTime:null,duration:null,result:null,error:null,retryCount:0})),metadata:{createdAt:Date.now(),createdBy:e.createdBy||"system",timeout:e.timeout||6e4,retryPolicy:e.retryPolicy||"exponential"}};return this.workflows.set(i,s),this.dispatchWorkflowCreated(s),s}async executeWorkflow(t,e={}){const n=this.workflows.get(t);if(!n)throw new Error(`Workflow ${t} not found`);if(n.status!=="created")throw new Error(`Workflow ${t} is not in a runnable state`);n.status="running",n.input=e,n.startTime=Date.now(),this.activeWorkflows.set(t,n),this.dispatchWorkflowStarted(n);try{const i=await this.executeWorkflowSteps(n);return n.status="completed",n.output=i,n.endTime=Date.now(),n.duration=n.endTime-n.startTime,this.activeWorkflows.delete(t),this.executionHistory.push(n),this.dispatchWorkflowCompleted(n),i}catch(i){throw n.status="failed",n.error=i.message,n.endTime=Date.now(),n.duration=n.endTime-n.startTime,this.activeWorkflows.delete(t),this.executionHistory.push(n),this.dispatchWorkflowFailed(n),i}}async executeWorkflowSteps(t){const e={...t.input};for(let n=0;n<t.steps.length;n++){const i=t.steps[n];try{await this.executeStep(t,i,e),i.result&&(e[i.id]=i.result)}catch(s){if(i.retryCount<i.retryCount){i.retryCount++,i.status="retrying",this.dispatchStepRetry(t,i),await this.delay(this.calculateRetryDelay(i.retryCount)),n--;continue}else throw new Error(`Step ${i.id} failed: ${s.message}`)}}return e}async executeStep(t,e,n){e.status="running",e.startTime=Date.now(),this.dispatchStepStarted(t,e);try{const i=await this.simulateStepExecution(e,n);e.result=i,e.status="completed",e.endTime=Date.now(),e.duration=e.endTime-e.startTime,this.dispatchStepCompleted(t,e)}catch(i){throw e.error=i.message,e.status="failed",e.endTime=Date.now(),e.duration=e.endTime-e.startTime,this.dispatchStepFailed(t,e,i),i}}async simulateStepExecution(t,e){const i={validation:1e3,processing:3e3,analysis:5e3,generation:2e3}[t.type]||2e3,s=Math.random()*1e3-500;switch(await this.delay(i+s),t.type){case"validation":return this.performValidation(e,t);case"processing":return this.performProcessing(e,t);case"analysis":return this.performAnalysis(e,t);case"generation":return this.performGeneration(e,t);default:return{success:!0,data:`Processed by ${t.agent}`}}}performValidation(t,e){const n={valid:!0,checks:["syntax","semantics","security"],score:.9+Math.random()*.1,agent:e.agent};return Math.random()<.1&&(n.valid=!1,n.issues=["Invalid input format"]),n}performProcessing(t,e){return{processed:!0,recordsProcessed:Math.floor(Math.random()*1e3)+100,processingTime:Date.now(),agent:e.agent}}performAnalysis(t,e){return{analysis:{insights:[`Insight ${Math.floor(Math.random()*10)+1}`],confidence:.8+Math.random()*.2,recommendations:[`Recommendation ${Math.floor(Math.random()*5)+1}`]},agent:e.agent}}performGeneration(t,e){return{generated:{content:`Generated content by ${e.agent}`,format:"text",size:Math.floor(Math.random()*5e3)+1e3},agent:e.agent}}monitorActiveWorkflows(){const t=Date.now();for(const[e,n]of this.activeWorkflows)t-n.startTime>n.metadata.timeout&&(n.status="timeout",n.error="Workflow execution timeout",this.activeWorkflows.delete(e),this.executionHistory.push(n),this.dispatchWorkflowTimedOut(n)),this.updateWorkflowProgress(n)}updateWorkflowProgress(t){const e=t.steps.filter(s=>s.status==="completed").length,n=t.steps.length,i=e/n*100;t.progress!==i&&(t.progress=i,this.dispatchWorkflowProgress(t))}calculateRetryDelay(t){return Math.min(3e4,1e3*Math.pow(2,t-1))}pauseWorkflow(t){const e=this.workflows.get(t);return e&&e.status==="running"?(e.status="paused",this.dispatchWorkflowPaused(e),!0):!1}resumeWorkflow(t){const e=this.workflows.get(t);return e&&e.status==="paused"?(e.status="running",this.dispatchWorkflowResumed(e),!0):!1}cancelWorkflow(t,e="User cancellation"){const n=this.workflows.get(t);return n&&(n.status==="running"||n.status==="paused")?(n.status="cancelled",n.error=e,n.endTime=Date.now(),n.duration=n.endTime-n.startTime,this.activeWorkflows.delete(t),this.executionHistory.push(n),this.dispatchWorkflowCancelled(n),!0):!1}getWorkflow(t){return this.workflows.get(t)}getActiveWorkflows(){return Array.from(this.activeWorkflows.values())}getWorkflowHistory(t=50){return this.executionHistory.slice(-t)}getWorkflowStats(){const t=this.workflows.size,e=this.executionHistory.filter(a=>a.status==="completed").length,n=this.executionHistory.filter(a=>a.status==="failed").length,i=this.activeWorkflows.size,s=e>0?this.executionHistory.filter(a=>a.status==="completed").reduce((a,r)=>a+r.duration,0)/e:0;return{total:t,completed:e,failed:n,running:i,successRate:t>0?e/t*100:0,averageDuration:Math.floor(s),activeWorkflows:this.activeWorkflows.size}}generateWorkflowId(){return`workflow-${Date.now()}-${Math.random().toString(36).substr(2,8)}`}dispatchWorkflowCreated(t){const e=new CustomEvent("workflow-created",{detail:t});document.dispatchEvent(e)}dispatchWorkflowStarted(t){const e=new CustomEvent("workflow-started",{detail:t});document.dispatchEvent(e)}dispatchWorkflowCompleted(t){const e=new CustomEvent("workflow-completed",{detail:t});document.dispatchEvent(e)}dispatchWorkflowFailed(t){const e=new CustomEvent("workflow-failed",{detail:t});document.dispatchEvent(e)}dispatchWorkflowTimedOut(t){const e=new CustomEvent("workflow-timed-out",{detail:t});document.dispatchEvent(e)}dispatchWorkflowPaused(t){const e=new CustomEvent("workflow-paused",{detail:t});document.dispatchEvent(e)}dispatchWorkflowResumed(t){const e=new CustomEvent("workflow-resumed",{detail:t});document.dispatchEvent(e)}dispatchWorkflowCancelled(t){const e=new CustomEvent("workflow-cancelled",{detail:t});document.dispatchEvent(e)}dispatchWorkflowProgress(t){const e=new CustomEvent("workflow-progress",{detail:t});document.dispatchEvent(e)}dispatchStepStarted(t,e){const n=new CustomEvent("workflow-step-started",{detail:{workflow:t,step:e}});document.dispatchEvent(n)}dispatchStepCompleted(t,e){const n=new CustomEvent("workflow-step-completed",{detail:{workflow:t,step:e}});document.dispatchEvent(n)}dispatchStepFailed(t,e,n){const i=new CustomEvent("workflow-step-failed",{detail:{workflow:t,step:e,error:n}});document.dispatchEvent(i)}dispatchStepRetry(t,e){const n=new CustomEvent("workflow-step-retry",{detail:{workflow:t,step:e}});document.dispatchEvent(n)}delay(t){return new Promise(e=>setTimeout(e,t))}}class E{constructor(){this.currentSection="welcome",this.demoEngine=new f,this.isInitialized=!1,this.tutorialMode=!1,this.tutorialStep=1,this.components={trustProtocol:new y,phaseVelocity:new v,detector:new w,identityTracker:new b,experimentRunner:new M,statisticalValidator:new S,agentRegistry:new C,workflowEngine:new x},this.detectionData={metrics:{reality:[],trust:[],ethical:[],resonance:[],canvas:[],identity:[]},alerts:[],phaseVelocity:[]},this.experimentData=null,this.agentFleet=[]}async init(){try{await this.hideLoadingScreen(),this.initQuantumBackground(),this.initNavigation(),this.initHeroAnimations(),await this.initializeComponents(),this.initVisualizations(),this.startRealTimeSimulations(),this.initTutorialSystem(),this.isInitialized=!0,console.log("SONATE Demo initialized successfully")}catch(t){console.error("Failed to initialize demo:",t),this.showError("Demo initialization failed. Please refresh the page.")}}async hideLoadingScreen(){const t=document.getElementById("loading-screen");await this.delay(2e3),t.classList.add("hidden")}initQuantumBackground(){const t=document.getElementById("quantum-bg");if(!t)return;const e=50;for(let i=0;i<e;i++){const s=document.createElement("div");s.className="quantum-particle",s.style.cssText=`
                position: absolute;
                width: ${Math.random()*4+1}px;
                height: ${Math.random()*4+1}px;
                background: ${this.getRandomQuantumColor()};
                border-radius: 50%;
                left: ${Math.random()*100}%;
                top: ${Math.random()*100}%;
                opacity: ${Math.random()*.5+.1};
                animation: float ${Math.random()*10+10}s linear infinite;
            `,t.appendChild(s)}const n=document.createElement("style");n.textContent=`
            @keyframes float {
                0% { transform: translateY(0) rotate(0deg); }
                50% { transform: translateY(-20px) rotate(180deg); }
                100% { transform: translateY(0) rotate(360deg); }
            }
        `,document.head.appendChild(n)}getRandomQuantumColor(){const t=["#00ffff","#8b5cf6","#fbbf24","#10b981","#3b82f6"];return t[Math.floor(Math.random()*t.length)]}initNavigation(){document.querySelectorAll(".nav-item").forEach(n=>{n.addEventListener("click",i=>{const s=i.currentTarget.dataset.section;this.navigateToSection(s)})}),document.getElementById("tutorial-toggle").addEventListener("click",()=>this.toggleTutorial())}navigateToSection(t){if(t===this.currentSection)return;document.querySelectorAll(".nav-item").forEach(n=>{n.classList.remove("active"),n.dataset.section===t&&n.classList.add("active")}),document.querySelectorAll(".content-section").forEach(n=>{n.classList.remove("active")});const e=document.getElementById(`${t}-section`);e&&(e.classList.add("active"),this.currentSection=t,this.initializeSection(t))}initializeSection(t){switch(t){case"framework":this.initializeSONATEFramework();break;case"detection":this.initializeDetectionDashboard();break;case"research":this.initializeResearchLab();break;case"orchestration":this.initializeOrchestration();break;case"enterprise":this.initializeEnterpriseShowcase();break}}initializeSONATEFramework(){document.querySelectorAll(".principle-card").forEach((e,n)=>{setTimeout(()=>{e.style.animation="fadeInUp 0.6s ease forwards"},n*100)}),this.initDimensionsRadarChart()}initializeDetectionDashboard(){this.components.detector.startMonitoring(),this.initMetricCharts(),this.initPhaseVelocityChart()}initializeResearchLab(){const t=document.getElementById("run-experiment");t&&t.addEventListener("click",()=>this.runExperiment())}initializeOrchestration(){this.components.agentRegistry.initialize(),this.updateAgentFleet(),this.components.workflowEngine.initialize(),this.initializeTacticalCommand()}initializeEnterpriseShowcase(){this.initROICalculator(),this.initPerformanceCharts()}initHeroAnimations(){document.querySelectorAll(".counter").forEach(i=>{const s=parseInt(i.dataset.target),r=s/(2e3/16);let o=0;const c=()=>{o+=r,o<s?(i.textContent=Math.floor(o),requestAnimationFrame(c)):i.textContent=s},l=new IntersectionObserver(d=>{d.forEach(m=>{m.isIntersecting&&(c(),l.unobserve(m.target))})});l.observe(i)});const e=document.getElementById("start-tour");e&&e.addEventListener("click",()=>this.startInteractiveTour());const n=document.getElementById("skip-demo");n&&n.addEventListener("click",()=>{this.navigateToSection("framework")})}async initializeComponents(){for(const[t,e]of Object.entries(this.components))try{typeof e.initialize=="function"&&await e.initialize()}catch(n){console.error(`Failed to initialize component ${t}:`,n)}}initVisualizations(){this.initHero3DVisualization()}initHero3DVisualization(){const t=document.getElementById("hero-canvas");if(!t)return;const e=new THREE.Scene,n=new THREE.PerspectiveCamera(75,t.clientWidth/t.clientHeight,.1,1e3),i=new THREE.WebGLRenderer({alpha:!0,antialias:!0});i.setSize(t.clientWidth,t.clientHeight),t.appendChild(i.domElement);const s=new THREE.IcosahedronGeometry(2,1),a=new THREE.MeshPhongMaterial({color:65535,emissive:65535,emissiveIntensity:.2,wireframe:!0}),r=new THREE.Mesh(s,a);e.add(r);const o=new THREE.AmbientLight(4210752);e.add(o);const c=new THREE.DirectionalLight(65535,.5);c.position.set(5,5,5),e.add(c),n.position.z=5;const l=()=>{requestAnimationFrame(l),r.rotation.x+=.01,r.rotation.y+=.01,i.render(e,n)};l(),window.addEventListener("resize",()=>{n.aspect=t.clientWidth/t.clientHeight,n.updateProjectionMatrix(),i.setSize(t.clientWidth,t.clientHeight)})}initDimensionsRadarChart(){const t=document.getElementById("dimensions-chart");t&&new Chart(t,{type:"radar",data:{labels:["Reality Index","Trust Protocol","Ethical Alignment","Resonance Quality","Canvas Parity"],datasets:[{label:"Current Score",data:[8.7,9.5,4.2,8.5,82],backgroundColor:"rgba(0, 255, 255, 0.2)",borderColor:"rgba(0, 255, 255, 1)",borderWidth:2,pointBackgroundColor:"rgba(0, 255, 255, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(0, 255, 255, 1)"},{label:"Threshold",data:[8,8,3.5,7,75],backgroundColor:"rgba(139, 92, 246, 0.1)",borderColor:"rgba(139, 92, 246, 0.5)",borderWidth:1,borderDash:[5,5]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:100,ticks:{color:"#94a3b8",backdropColor:"transparent"},grid:{color:"rgba(148, 163, 184, 0.1)"},pointLabels:{color:"#cbd5e1",font:{size:12}}}},plugins:{legend:{labels:{color:"#cbd5e1"}}}}})}initMetricCharts(){["reality","trust","ethical","resonance","canvas","identity"].forEach(e=>{this.initMetricChart(e)})}initMetricChart(t){const e=document.getElementById(`${t}-chart`);e&&new Chart(e,{type:"line",data:{labels:this.generateTimeLabels(10),datasets:[{label:t.charAt(0).toUpperCase()+t.slice(1),data:this.generateRandomData(10,this.getMetricRange(t)),borderColor:this.getMetricColor(t),backgroundColor:this.getMetricColor(t,.1),borderWidth:2,tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:this.getMetricRange(t).max,ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}},x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}}},plugins:{legend:{display:!1}}}})}getMetricRange(t){return{reality:{min:0,max:10},trust:{min:0,max:100},ethical:{min:0,max:5},resonance:{min:0,max:100},canvas:{min:0,max:100},identity:{min:0,max:1}}[t]||{min:0,max:100}}getMetricColor(t,e=1){return{reality:`rgba(0, 255, 255, ${e})`,trust:`rgba(16, 185, 129, ${e})`,ethical:`rgba(139, 92, 246, ${e})`,resonance:`rgba(251, 191, 36, ${e})`,canvas:`rgba(59, 130, 246, ${e})`,identity:`rgba(239, 68, 68, ${e})`}[t]||`rgba(0, 255, 255, ${e})`}generateTimeLabels(t){const e=[],n=new Date;for(let i=t-1;i>=0;i--){const s=new Date(n-i*5e3);e.push(s.toLocaleTimeString())}return e}generateRandomData(t,e){return Array.from({length:t},()=>Math.random()*(e.max-e.min)+e.min)}initPhaseVelocityChart(){const t=document.getElementById("velocity-timeline");t&&new Chart(t,{type:"line",data:{labels:this.generateTimeLabels(20),datasets:[{label:"Phase-Shift Velocity",data:this.generateRandomData(20,{min:0,max:1}),borderColor:"rgba(0, 255, 255, 1)",backgroundColor:"rgba(0, 255, 255, 0.1)",borderWidth:2,tension:.4,fill:!0},{label:"Alert Threshold",data:Array(20).fill(.7),borderColor:"rgba(239, 68, 68, 0.8)",borderWidth:1,borderDash:[5,5],fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:1,ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}},x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}}},plugins:{legend:{labels:{color:"#cbd5e1"}}}}})}startRealTimeSimulations(){setInterval(()=>{this.currentSection==="detection"&&this.updateDetectionMetrics()},2e3),setInterval(()=>{this.currentSection==="detection"&&this.updatePhaseVelocity()},3e3),setInterval(()=>{this.currentSection==="detection"&&Math.random()>.7&&this.generateAlert()},8e3)}updateDetectionMetrics(){const t={"reality-index":(Math.random()*2+7).toFixed(1),"trust-status":Math.random()>.2?"PASS":"PARTIAL","ethical-score":(Math.random()*1.5+3).toFixed(1),"resonance-level":["STRONG","ADVANCED","BREAKTHROUGH"][Math.floor(Math.random()*3)],"canvas-score":Math.floor(Math.random()*20+70),"identity-coherence":(Math.random()*.2+.8).toFixed(2)};Object.entries(t).forEach(([n,i])=>{const s=document.getElementById(n);s&&(s.textContent=i,s.style.animation="pulse 0.5s ease",setTimeout(()=>{s.style.animation=""},500))});const e=document.getElementById("detection-latency");if(e){const n=Math.floor(Math.random()*30+70);e.textContent=`${n}ms`}}updatePhaseVelocity(){const t=Math.random()*2,e=Math.random()*2,n=Math.random()*5+1,i=Math.sqrt(t*t+e*e)/n,s=document.getElementById("phase-velocity"),a=document.getElementById("velocity-status");if(s&&a){s.textContent=i.toFixed(3);let r="NORMAL",o="var(--success)";i>.7&&(r="WARNING",o="var(--warning)"),i>.85&&(r="CRITICAL",o="var(--error)"),a.textContent=r,a.style.background=o,a.style.color="var(--dark-matter)"}}generateAlert(){const t=[{type:"info",title:"System Update",message:"Trust protocols updated successfully"},{type:"warning",title:"Identity Coherence",message:"Agent identity drift detected (0.78)"},{type:"error",title:"Trust Violation",message:"Canvas parity below threshold (65%)"},{type:"info",title:"Performance",message:"Detection latency within optimal range (82ms)"}],e=t[Math.floor(Math.random()*t.length)],n=document.getElementById("alerts-container");if(n){const i=document.createElement("div");for(i.className=`alert ${e.type}`,i.innerHTML=`
                <div class="alert-icon">${e.type==="info"?"":e.type==="warning"?"":""}</div>
                <div class="alert-content">
                    <div class="alert-title">${e.title}</div>
                    <div class="alert-message">${e.message}</div>
                </div>
                <div class="alert-time">${new Date().toLocaleTimeString()}</div>
            `,n.insertBefore(i,n.firstChild);n.children.length>5;)n.removeChild(n.lastChild)}}async runExperiment(){const t=document.getElementById("experiment-name")?.value,e=document.getElementById("experiment-hypothesis")?.value;if(!t||!e){alert("Please provide experiment name and hypothesis");return}const n=document.getElementById("experiment-results");n&&(n.innerHTML=`
                <div class="experiment-progress">
                    <div class="progress-indicator">
                        <div class="quantum-loader" style="width: 60px; height: 60px;">
                            <div class="quantum-ring"></div>
                            <div class="quantum-ring"></div>
                            <div class="quantum-ring"></div>
                        </div>
                    </div>
                    <p>Running double-blind experiment...</p>
                    <p class="progress-detail">Initializing CONDUCTOR, VARIANT, EVALUATOR, OVERSEER agents</p>
                </div>
            `),await this.delay(3e3);const i=this.components.statisticalValidator.generateResults();this.displayExperimentResults(i)}displayExperimentResults(t){const e=document.getElementById("experiment-results");e&&(e.innerHTML=`
            <div class="experiment-results">
                <div class="results-summary">
                    <div class="result-metric">
                        <div class="metric-label">P-Value</div>
                        <div class="metric-value ${t.pValue<.05?"significant":"not-significant"}">
                            ${t.pValue.toFixed(4)}
                        </div>
                        <div class="metric-interpretation">
                            ${t.pValue<.05?"Statistically Significant":"Not Significant"}
                        </div>
                    </div>
                    
                    <div class="result-metric">
                        <div class="metric-label">Effect Size (Cohen's d)</div>
                        <div class="metric-value">${t.effectSize.toFixed(3)}</div>
                        <div class="metric-interpretation">
                            ${this.interpretEffectSize(t.effectSize)}
                        </div>
                    </div>
                    
                    <div class="result-metric">
                        <div class="metric-label">Confidence Interval</div>
                        <div class="metric-value">[${t.ciLower.toFixed(3)}, ${t.ciUpper.toFixed(3)}]</div>
                        <div class="metric-interpretation">95% CI</div>
                    </div>
                    
                    <div class="result-metric">
                        <div class="metric-label">Sample Size</div>
                        <div class="metric-value">${t.sampleSize}</div>
                        <div class="metric-interpretation">Total participants</div>
                    </div>
                </div>
                
                <div class="results-chart">
                    <canvas id="experiment-results-chart"></canvas>
                </div>
                
                <div class="results-conclusion">
                    <h4>Conclusion</h4>
                    <p>${t.conclusion}</p>
                    <button class="btn-primary" onclick="window.demo.exportExperimentResults()">
                        Export Results
                    </button>
                </div>
            </div>
        `,this.createExperimentResultsChart(t))}interpretEffectSize(t){return Math.abs(t)<.2?"Small effect":Math.abs(t)<.5?"Medium effect":"Large effect"}createExperimentResultsChart(t){const e=document.getElementById("experiment-results-chart");e&&new Chart(e,{type:"bar",data:{labels:["Trust Score","Ethical Alignment","Canvas Parity","User Satisfaction"],datasets:[{label:"Control Group",data:t.controlGroup,backgroundColor:"rgba(139, 92, 246, 0.7)",borderColor:"rgba(139, 92, 246, 1)",borderWidth:1},{label:"Test Group (Constitutional AI)",data:t.testGroup,backgroundColor:"rgba(0, 255, 255, 0.7)",borderColor:"rgba(0, 255, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}},x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}}},plugins:{legend:{labels:{color:"#cbd5e1"}}}}})}exportExperimentResults(){const t={timestamp:new Date().toISOString(),experiment:document.getElementById("experiment-name")?.value,hypothesis:document.getElementById("experiment-hypothesis")?.value,results:this.experimentData},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`experiment-results-${Date.now()}.json`,i.click(),URL.revokeObjectURL(n)}updateAgentFleet(){const t=[{name:"Customer Support AI",capabilities:["chat","analysis","escalation"]},{name:"Data Analysis Agent",capabilities:["analytics","reporting","visualization"]},{name:"Compliance Monitor",capabilities:["audit","reporting","alerting"]},{name:"Research Assistant",capabilities:["analysis","synthesis","validation"]}];this.agentFleet=t.map((e,n)=>({id:`agent-${n+1}`,name:e.name,capabilities:e.capabilities,did:`did:key:z6Mk${this.generateRandomString(44)}`,status:["Active","Idle","Processing"][Math.floor(Math.random()*3)],trustScore:Math.floor(Math.random()*20+80)})),this.renderAgentFleet(),this.updateTacticalCommand()}generateRandomString(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}renderAgentFleet(){const t=document.getElementById("agents-tbody");t&&(t.innerHTML=this.agentFleet.map(e=>`
            <tr>
                <td class="font-mono">${e.id}</td>
                <td>${e.name}</td>
                <td>${e.capabilities.join(", ")}</td>
                <td class="font-mono text-sm">${e.did.substring(0,20)}...</td>
                <td>
                    <span class="status-badge ${e.status.toLowerCase()}">
                        ${e.status}
                    </span>
                </td>
                <td>
                    <div class="trust-score">
                        <div class="score-bar">
                            <div class="score-fill" style="width: ${e.trustScore}%"></div>
                        </div>
                        <span>${e.trustScore}</span>
                    </div>
                </td>
                <td>
                    <button class="btn-sm" onclick="window.demo.configureAgent('${e.id}')">
                        Configure
                    </button>
                </td>
            </tr>
        `).join(""))}updateTacticalCommand(){const t=this.agentFleet.length,e=this.agentFleet.filter(s=>s.status==="Active").length,n=Math.floor(this.agentFleet.reduce((s,a)=>s+a.trustScore,0)/t),i={"total-agents":t,"active-agents":e,"avg-trust":n,"workflow-count":Math.floor(Math.random()*5)};Object.entries(i).forEach(([s,a])=>{const r=document.getElementById(s);r&&(r.textContent=a)})}initializeTacticalCommand(){const t=document.getElementById("execute-workflow");t&&t.addEventListener("click",()=>this.executeWorkflow());const e=document.getElementById("register-agent");e&&e.addEventListener("click",()=>this.registerNewAgent());const n=document.getElementById("deploy-fleet");n&&n.addEventListener("click",()=>this.deployFleet())}async executeWorkflow(){const t=document.querySelectorAll(".workflow-step");for(let e=0;e<t.length;e++)t[e].style.borderColor="var(--quantum-cyan)",t[e].style.background="rgba(0, 255, 255, 0.1)",await this.delay(1e3),t[e].style.borderColor="var(--success)",t[e].style.background="rgba(16, 185, 129, 0.1)";this.showNotification("Workflow Complete","All workflow steps executed successfully")}registerNewAgent(){const t={id:`agent-${this.agentFleet.length+1}`,name:`New Agent ${this.agentFleet.length+1}`,capabilities:["processing"],did:`did:key:z6Mk${this.generateRandomString(44)}`,status:"Idle",trustScore:Math.floor(Math.random()*20+80)};this.agentFleet.push(t),this.renderAgentFleet(),this.updateTacticalCommand(),this.showNotification("Agent Registered",`${t.name} has been added to the fleet`)}deployFleet(){this.showNotification("Fleet Deployment","Deploying agent fleet to production environment..."),setTimeout(()=>{this.agentFleet.forEach(t=>{t.status==="Idle"&&(t.status="Active")}),this.renderAgentFleet(),this.updateTacticalCommand(),this.showNotification("Deployment Complete","All agents are now active in production")},3e3)}configureAgent(t){this.showNotification("Agent Configuration",`Configuring agent ${t}...`)}initROICalculator(){const t=document.getElementById("calculate-roi");t&&t.addEventListener("click",()=>this.calculateROI())}calculateROI(){const t=parseInt(document.getElementById("num-agents")?.value||100);parseInt(document.getElementById("daily-interactions")?.value||1e3);const e=parseInt(document.getElementById("risk-incidents")?.value||5),n=parseInt(document.getElementById("incident-cost")?.value||5e4),i=e*n*.8,s=t*1e3,r=(i+s)*12/(t*500)*100,o={"risk-reduction":`$${i.toLocaleString()}`,"compliance-savings":`$${s.toLocaleString()}`,"annual-roi":`${r.toFixed(1)}%`};Object.entries(o).forEach(([c,l])=>{const d=document.getElementById(c);d&&(d.textContent=l,d.style.animation="fadeInUp 0.6s ease")})}initPerformanceCharts(){this.initPerformanceChart("throughput"),this.initPerformanceChart("latency"),this.initPerformanceChart("availability"),this.initPerformanceChart("scale")}initPerformanceChart(t){const e=document.getElementById(`${t}-chart`);if(!e)return;const n=this.generatePerformanceData(t);new Chart(e,{type:"line",data:{labels:n.labels,datasets:[{label:n.label,data:n.values,borderColor:"rgba(0, 255, 255, 1)",backgroundColor:"rgba(0, 255, 255, 0.1)",borderWidth:2,tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}},x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148, 163, 184, 0.1)"}}},plugins:{legend:{display:!1}}}})}generatePerformanceData(t){const n={throughput:{label:"Detections/sec",values:Array.from({length:24},()=>Math.random()*2e3+8e3),unit:""},latency:{label:"Response Time (ms)",values:Array.from({length:24},()=>Math.random()*30+70),unit:"ms"},availability:{label:"Uptime (%)",values:Array.from({length:24},()=>Math.random()*.1+99.9),unit:"%"},scale:{label:"Concurrent Users",values:Array.from({length:24},()=>Math.random()*2e5+8e5),unit:""}}[t];return{labels:Array.from({length:24},(s,a)=>`${a}:00`),label:n.label,values:n.values}}initTutorialSystem(){const t=document.getElementById("close-tutorial"),e=document.getElementById("prev-tutorial"),n=document.getElementById("next-tutorial");t&&t.addEventListener("click",()=>this.toggleTutorial()),e&&e.addEventListener("click",()=>this.previousTutorialStep()),n&&n.addEventListener("click",()=>this.nextTutorialStep())}toggleTutorial(){const t=document.getElementById("tutorial-overlay");t&&(t.classList.toggle("hidden"),this.tutorialMode=!t.classList.contains("hidden"))}startInteractiveTour(){this.toggleTutorial(),this.tutorialStep=1,this.updateTutorialContent()}updateTutorialContent(){const t=[{title:"Welcome to SONATE Platform",content:"This is the most advanced enterprise AI governance platform. Constitutional AI ensures trust, compliance, and accountability."},{title:"SONATE Framework",content:"The 6 SONATE principles form the foundation of trust: Consent, Explanation, Audit, Override, Disconnect, and Agency."},{title:"Real-Time Detection",content:"Monitor AI interactions in real-time with sub-100ms latency across 5 dimensions derived from the core principles."},{title:"Phase-Shift Velocity",content:"Our revolutionary /t mathematical innovation provides early warning detection through behavioral seismograph analysis."},{title:"Research Validation",content:"Double-blind experiments with statistical validation prove that constitutional AI outperforms traditional approaches."},{title:"Enterprise Ready",content:"Production-grade security, compliance, and scalability make SONATE the trusted choice for enterprise AI deployment."}],e=t[this.tutorialStep-1],n=document.querySelector(".tutorial-body"),i=document.querySelector(".tutorial-progress");n&&e&&(n.innerHTML=`
                <div class="tutorial-step active">
                    <h4>${e.title}</h4>
                    <p>${e.content}</p>
                </div>
            `),i&&(i.textContent=`Step ${this.tutorialStep} of ${t.length}`);const s=document.getElementById("prev-tutorial"),a=document.getElementById("next-tutorial");s&&(s.disabled=this.tutorialStep===1),a&&(a.textContent=this.tutorialStep===t.length?"Finish":"Next")}previousTutorialStep(){this.tutorialStep>1&&(this.tutorialStep--,this.updateTutorialContent())}nextTutorialStep(){this.tutorialStep<6?(this.tutorialStep++,this.updateTutorialContent()):(this.toggleTutorial(),this.navigateToSection("framework"))}showNotification(t,e){console.log(`${t}: ${e}`);const n=document.createElement("div");n.className="notification",n.innerHTML=`
            <div class="notification-title">${t}</div>
            <div class="notification-message">${e}</div>
        `,n.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 16px;
            color: #fff;
            z-index: 3000;
            animation: slideIn 0.3s ease;
            max-width: 300px;
        `,document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease",setTimeout(()=>{document.body.removeChild(n)},300)},3e3)}showError(t){this.showNotification("Error",t)}delay(t){return new Promise(e=>setTimeout(e,t))}}document.addEventListener("DOMContentLoaded",()=>{window.demo=new E,window.demo.init()});const g=document.createElement("style");g.textContent=`
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }

    .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .status-badge.active {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
    }

    .status-badge.idle {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
    }

    .status-badge.processing {
        background: rgba(59, 130, 246, 0.2);
        color: var(--info);
    }

    .trust-score {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .trust-score .score-bar {
        width: 50px;
        height: 8px;
        background: rgba(148, 163, 184, 0.2);
        border-radius: 4px;
        overflow: hidden;
    }

    .trust-score .score-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--quantum-cyan), var(--neural-purple));
    }

    .btn-sm {
        padding: 6px 12px;
        font-size: 0.75rem;
        background: rgba(0, 255, 255, 0.1);
        border: 1px solid rgba(0, 255, 255, 0.3);
        color: var(--quantum-cyan);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-sm:hover {
        background: rgba(0, 255, 255, 0.2);
    }

    .experiment-progress {
        text-align: center;
        padding: 40px;
    }

    .progress-indicator {
        margin-bottom: 20px;
    }

    .experiment-results {
        display: grid;
        gap: 24px;
    }

    .results-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
    }

    .result-metric {
        text-align: center;
        padding: 20px;
        background: rgba(15, 23, 42, 0.4);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 8px;
    }

    .metric-label {
        color: var(--slate-400);
        font-size: 0.875rem;
        margin-bottom: 8px;
    }

    .metric-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--quantum-cyan);
        font-family: var(--font-mono);
        margin-bottom: 4px;
    }

    .metric-value.significant {
        color: var(--success);
    }

    .metric-value.not-significant {
        color: var(--warning);
    }

    .metric-interpretation {
        color: var(--slate-400);
        font-size: 0.75rem;
    }

    .results-chart {
        height: 300px;
        background: rgba(15, 23, 42, 0.4);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 8px;
        padding: 16px;
    }

    .results-conclusion {
        background: rgba(15, 23, 42, 0.4);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 8px;
        padding: 20px;
    }

    .results-conclusion h4 {
        color: var(--slate-100);
        margin-bottom: 12px;
    }

    .results-conclusion p {
        color: var(--slate-400);
        margin-bottom: 16px;
    }
`;document.head.appendChild(g);
//# sourceMappingURL=main-Bqp_evO1.js.map
