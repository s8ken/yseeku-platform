# SONATE Platform Environment Variables
# Copy this file to .env and fill in your actual values

# ============================================================================
# CORE SECURITY & CRYPTOGRAPHY
# ============================================================================

# Ed25519 keys for trust receipt signing (generate with: openssl genpkey -algorithm ed25519)
# Public key (base64 encoded) - can be shared
SONATE_PUBLIC_KEY=

# Private key (base64 encoded) - NEVER commit this, use secrets manager in production
# DEV/TEST ONLY - In production, use AWS KMS, Google Cloud KMS, or HashiCorp Vault
SONATE_PRIVATE_KEY=

# JWT secret for authentication (min 32 characters, use secure random string)
# Generate with: openssl rand -base64 48
JWT_SECRET=

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# MongoDB connection string (primary database)
# Format: mongodb://username:password@host:port/database
# For MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/database
MONGODB_URI=mongodb://localhost:27017/sonate_prod

# Redis connection for caching and rate limiting
# Format: redis://[[username]:[password]@]host:port[/database]
REDIS_URL=redis://localhost:6379

# ============================================================================
# EXTERNAL KEY MANAGEMENT (Choose one - optional but recommended for production)
# ============================================================================

# AWS KMS Configuration
AWS_REGION=us-east-1
AWS_KMS_KEY_ID=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Google Cloud KMS Configuration
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
GOOGLE_KMS_PROJECT_ID=
GOOGLE_KMS_LOCATION=global
GOOGLE_KMS_KEY_RING=sonate-keys
GOOGLE_KMS_KEY_NAME=trust-signing-key

# HashiCorp Vault Configuration
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=
VAULT_NAMESPACE=

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Sentry for error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Datadog for metrics and APM
DD_API_KEY=
DD_APP_KEY=
DD_SERVICE=sonate-platform
DD_ENV=development

# New Relic (alternative to Datadog)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=sonate-platform

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# ============================================================================
# AUTHENTICATION & OAUTH (Optional)
# ============================================================================

# OAuth 2.0 / OIDC Configuration
OIDC_ISSUER_URL=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# Session configuration
SESSION_SECRET=
SESSION_MAX_AGE=86400000

# ============================================================================
# RATE LIMITING & SECURITY
# ============================================================================

# API rate limiting (requests per window)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yseeku.com

# In production, include your Vercel frontend URL to allow auth/login from browser
# Example:
# CORS_ORIGIN=https://yseeku-platform.vercel.app,https://yseeku.com

# Enable/disable security features
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true
ENABLE_HELMET=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable experimental features (use with caution in production)
ENABLE_EXPERIMENTAL_FEATURES=false

# Enable multi-tenancy
ENABLE_MULTI_TENANCY=true

# Enable trust receipt verification
ENABLE_TRUST_RECEIPTS=true

# Enable AI detection monitoring
ENABLE_AI_DETECTION=true

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# Application port
PORT=5000

# Public URL (used for generating links, webhooks, etc.)
PUBLIC_URL=http://localhost:5000

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# ============================================================================
# FRONTEND → BACKEND BRIDGE (Next.js on Vercel → Fly.io backend)
# ============================================================================

# Base URL for backend API used by Next.js rewrites and server-side fetch
# In Vercel Production set this to: https://yseeku-backend.fly.dev
NEXT_PUBLIC_BACKEND_URL=http://127.0.0.1:3001

# Optional resonance sidecar (Python) if deployed
# In production prefer backend routes; leave unset if not used
# RESONANCE_ENGINE_URL=

# ============================================================================
# DEPLOYMENT CONFIGURATION (Railway, Vercel, etc.)
# ============================================================================

# Railway specific (auto-provided by Railway)
# RAILWAY_STATIC_URL=
# RAILWAY_GIT_COMMIT_SHA=
# RAILWAY_GIT_BRANCH=

# Vercel specific (auto-provided by Vercel)
# VERCEL=1
# VERCEL_URL=
# VERCEL_ENV=

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

# Seed data for development
SEED_DATABASE=false

# Mock external services in development
MOCK_EXTERNAL_SERVICES=false

# Test environment database
TEST_DATABASE_URL=postgresql://sonate:password@localhost:5432/sonate_test

# ============================================================================
# DEVELOPMENT USER CREDENTIALS
# ============================================================================
# These are used ONLY for development/testing environments
# In production, use real authentication (OAuth, SAML, database users)

# Development admin user
DEV_ADMIN_USERNAME=admin
DEV_ADMIN_PASSWORD=admin123!

# Development regular user  
DEV_USER_USERNAME=user
DEV_USER_PASSWORD=user123!

# Enable development authentication (set to false in production)
ENABLE_DEV_AUTH=true

# ============================================================================
# BACKUP & DISASTER RECOVERY
# ============================================================================

# S3 bucket for backups
BACKUP_S3_BUCKET=
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY_ID=
BACKUP_S3_SECRET_ACCESS_KEY=

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# Backup retention period (days)
BACKUP_RETENTION_DAYS=30

# ============================================================================
# PERFORMANCE & SCALING
# ============================================================================

# Database connection pool size
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis connection pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=20

# Worker threads for background jobs
WORKER_CONCURRENCY=5

# ============================================================================
# TRUST PROTOCOL CONFIGURATION
# ============================================================================

# Trust score thresholds for alerts
TRUST_ALERT_YELLOW=2.0
TRUST_ALERT_RED=3.5
TRUST_ALERT_CRITICAL=6.0

# Identity coherence threshold
IDENTITY_COHERENCE_MIN=0.8

# Detection latency target (ms)
DETECTION_LATENCY_TARGET=100

# Throughput target (detections per second)
DETECTION_THROUGHPUT_TARGET=1000

# ============================================================================
# NOTES
# ============================================================================
#
# Security Best Practices:
# 1. NEVER commit .env files to version control (already in .gitignore)
# 2. Use different secrets for each environment (dev, staging, prod)
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. In production, use a secrets manager (AWS Secrets Manager, Vault, etc.)
# 5. Grant minimum necessary permissions to service accounts
# 6. Enable audit logging for all secret access
# 7. Use TLS/SSL for all database and Redis connections in production
#
# For production deployment:
# - Set NODE_ENV=production
# - Use strong, randomly generated secrets (64+ characters)
# - Enable all security features (rate limiting, CSRF, Helmet)
# - Configure proper CORS origins
# - Use external key management (KMS/Vault)
# - Enable monitoring and alerting (Sentry, Datadog)
# - Set up automated backups
# - Configure proper database connection pooling
#
